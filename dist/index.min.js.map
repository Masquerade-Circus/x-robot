//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsaWJfZXhwb3J0cyIsIl9fZXhwb3J0IiwiYWN0aW9uIiwiY29udGV4dCIsImRhbmdlclN0YXRlIiwiZGVzY3JpcHRpb24iLCJnZXRTdGF0ZSIsImd1YXJkIiwiaW1tZWRpYXRlIiwiaW5mb1N0YXRlIiwiaW5pdGlhbCIsImludm9rZSIsIm1hY2hpbmUiLCJuZXN0ZWQiLCJuZXN0ZWRHdWFyZCIsInBhcmFsbGVsIiwicHJpbWFyeVN0YXRlIiwicHJvZHVjZXIiLCJzdGFydCIsInN0YXRlIiwic3RhdGVzIiwic3VjY2Vzc1N0YXRlIiwidHJhbnNpdGlvbiIsIndhcm5pbmdTdGF0ZSIsIl9fRVhQT1JUU19fIiwiU1RBUlRfRVZFTlQiLCJpc1ZhbGlkU3RyaW5nIiwic3RyIiwidHJpbSIsImxlbmd0aCIsImlzVmFsaWRPYmplY3QiLCJvYmoiLCJpc1Byb2R1Y2VyIiwicHJvZHVjZXIyIiwiaXNQcm9kdWNlcldpdGhUcmFuc2l0aW9uIiwiaXNBY3Rpb24iLCJhY3Rpb24yIiwiaXNJbW1lZGlhdGUiLCJpbW1lZGlhdGUyIiwiaXNHdWFyZCIsImd1YXJkMiIsImlzTmVzdGVkR3VhcmQiLCJoYXNUcmFuc2l0aW9uIiwic3RhdGUyIiwidHJhbnNpdGlvbjIiLCJvbiIsImlzTmVzdGVkTWFjaGluZURpcmVjdGl2ZSIsIm1hY2hpbmUyIiwiaXNOZXN0ZWRNYWNoaW5lV2l0aFRyYW5zaXRpb25EaXJlY3RpdmUiLCJpc1N0YXRlc0RpcmVjdGl2ZSIsInN0YXRlczIiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJ2YWx1ZXMiLCJpc1N0YXRlRGlyZWN0aXZlIiwiaXNEZXNjcmlwdGlvbkRpcmVjdGl2ZSIsImRlc2NyaXB0aW9uMiIsImlzTmVzdGVkVHJhbnNpdGlvbiIsInRlc3QiLCJpc1BhcmFsbGVsVHJhbnNpdGlvbiIsImlzTmVzdGVkSW1tZWRpYXRlRGlyZWN0aXZlIiwiaXNQYXJhbGxlbEltbWVkaWF0ZURpcmVjdGl2ZSIsImRlZXBGcmVlemUiLCJpc0Zyb3plbiIsIkFycmF5IiwiaXNBcnJheSIsImkiLCJsIiwicHJvcCIsImZyZWV6ZSIsImNsb25lQ29udGV4dCIsImNvbnRleHQyIiwid2Vha01hcCIsIldlYWtNYXAiLCJoYXMiLCJnZXQiLCJyZXN1bHQiLCJtYXAiLCJpdGVtIiwiRGF0ZSIsImdldFRpbWUiLCJTZXQiLCJNYXAiLCJSZWdFeHAiLCJzb3VyY2UiLCJmbGFncyIsImFycmF5IiwiZnJvbSIsInZhbCIsInNldCIsImNhbk1ha2VUcmFuc2l0aW9uIiwiY3VycmVudFN0YXRlT2JqZWN0IiwiRXJyb3IiLCJ0cmltbWVkVHJhbnNpdGlvbiIsIm5hbWUiLCJoaXN0b3J5IiwidHJhbnNpdGlvblBhcnRzIiwic3BsaXQiLCJzdGF0ZU5hbWUiLCJzaGlmdCIsInRyYW5zaXRpb25OYW1lIiwiam9pbiIsInBhcmFsbGVsTWFjaGluZSIsImN1cnJlbnQiLCJuZXN0ZWRNYWNoaW5lIiwidGl0bGUiLCJhcmdzIiwibXlNYWNoaW5lIiwiaWQiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJmcm96ZW4iLCJpc0FzeW5jIiwic2hvdWxkRnJlZXplIiwiaW5pdGlhbDIiLCJwYXJhbGxlbDIiLCJhcmciLCJuZXdDb250ZXh0IiwicHVzaCIsInJ1biIsImZpbmQiLCJuZXdTdGF0ZXMiLCJtYWNoaW5lcyIsIm5lc3RlZDIiLCJzdWNjZXNzVHJhbnNpdGlvbiIsInN1Y2Nlc3MiLCJ0YXJnZXQiLCJndWFyZHMiLCJmYWlsdXJlVHJhbnNpdGlvbiIsImZhaWx1cmUiLCJ0eXBlIiwib25TdWNjZXNzUHJvZHVjZXIiLCJvbkZhaWx1cmVQcm9kdWNlciIsInN0YXRlT2JqZWN0IiwicGF0aCIsImlzTWFjaGluZSIsInBhcmFsbGVsTmFtZSIsInBhdGhQYXJ0cyIsIm5lc3RlZE1hY2hpbmVJZCIsInJ1blByb2R1Y2VyIiwicGF5bG9hZCIsImFzeW5jIiwicnVuQWN0aW9uIiwiZXJyb3IiLCJoYXNGYXRhbEVycm9yIiwiZmF0YWwiLCJjYXRjaEVycm9yIiwicnVuTmVzdGVkTWFjaGluZXMiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiaW52b2tlSW1tZWRpYXRlRGlyZWN0aXZlcyIsImltbWVkaWF0ZURpcmVjdGl2ZSIsInBhcmFsbGVsTWFjaGluZUlkIiwicGFyYWxsZWxUcmFuc2l0aW9uIiwicGFyYWxsZWxUcmFuc2l0aW9uUGFydHMiLCJydW5QYXJhbGxlbFRyYW5zaXRpb24iLCJuZXN0ZWRUcmFuc2l0aW9uUGFydHMiLCJuZXN0ZWRUcmFuc2l0aW9uIiwibmVzdGVkTWFjaGluZURpcmVjdGl2ZSIsImN1cnJlbnROZXN0ZWRTdGF0ZSIsInJ1bk5lc3RlZFRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uT2JqZWN0Iiwic2hvdWxkQ29udGludWUiLCJydW5HdWFyZHMiLCJ0YXJnZXRTdGF0ZSIsInRhcmdldFN0YXRlT2JqZWN0IiwicnVuQWN0aW9uc0FuZFByb2R1Y2VycyIsInJ1blByb2R1Y2VycyJdLCJzb3VyY2VzIjpbIi4uL2xpYi9pbmRleC50cyIsIi4uL2xpYi9tYWNoaW5lL2ludGVyZmFjZXMudHMiLCIuLi9saWIvdXRpbHMudHMiLCIuLi9saWIvbWFjaGluZS9jcmVhdGUudHMiLCIuLi9saWIvbWFjaGluZS9pbnZva2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIHgtcm9ib3RcbiAqIEBkZXNjcmlwdGlvbiBYLVJvYm90IGlzIGEgZmluaXRlIHN0YXRlIG1hY2hpbmUgbGlicmFyeSBmb3Igbm9kZWpzIGFuZCBmb3IgdGhlIHdlYi5cbiAqICovXG5cbmltcG9ydCB7XG4gIGFjdGlvbixcbiAgY29udGV4dCxcbiAgZGFuZ2VyU3RhdGUsXG4gIGRlc2NyaXB0aW9uLFxuICBnZXRTdGF0ZSxcbiAgZ3VhcmQsXG4gIGltbWVkaWF0ZSxcbiAgaW5mb1N0YXRlLFxuICBpbml0aWFsLFxuICBtYWNoaW5lLFxuICBuZXN0ZWQsXG4gIG5lc3RlZEd1YXJkLFxuICBwYXJhbGxlbCxcbiAgcHJpbWFyeVN0YXRlLFxuICBwcm9kdWNlcixcbiAgc3RhdGUsXG4gIHN0YXRlcyxcbiAgc3VjY2Vzc1N0YXRlLFxuICB0cmFuc2l0aW9uLFxuICB3YXJuaW5nU3RhdGVcbn0gZnJvbSBcIi4vbWFjaGluZS9jcmVhdGVcIjtcbmltcG9ydCB7IGludm9rZSwgc3RhcnQgfSBmcm9tIFwiLi9tYWNoaW5lL2ludm9rZVwiO1xuXG5leHBvcnQge1xuICBtYWNoaW5lLFxuICBuZXN0ZWQsXG4gIGNvbnRleHQsXG4gIGluaXRpYWwsXG4gIHBhcmFsbGVsLFxuICBzdGF0ZXMsXG4gIHN0YXRlLFxuICBpbmZvU3RhdGUsXG4gIHdhcm5pbmdTdGF0ZSxcbiAgc3VjY2Vzc1N0YXRlLFxuICBkYW5nZXJTdGF0ZSxcbiAgcHJpbWFyeVN0YXRlLFxuICBkZXNjcmlwdGlvbixcbiAgZ3VhcmQsXG4gIG5lc3RlZEd1YXJkLFxuICBwcm9kdWNlcixcbiAgYWN0aW9uLFxuICB0cmFuc2l0aW9uLFxuICBpbW1lZGlhdGUsXG4gIGludm9rZSxcbiAgc3RhcnQsXG4gIGdldFN0YXRlLFxufTtcbiIsIi8qKiBAbW9kdWxlIHgtcm9ib3QgKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWFjaGluZUFyZ3VtZW50c1xuICBleHRlbmRzIEFycmF5PFxuICAgIHwgc3RyaW5nXG4gICAgfCBDb250ZXh0RGlyZWN0aXZlXG4gICAgfCBJbml0aWFsRGlyZWN0aXZlXG4gICAgfCBTaG91bGRGcmVlemVEaXJlY3RpdmVcbiAgICB8IFN0YXRlc0RpcmVjdGl2ZVxuICAgIHwgUGFyYWxsZWxEaXJlY3RpdmVcbiAgPiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHQge1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvbkRpcmVjdGl2ZSB7XG4gIHRyYW5zaXRpb246IHN0cmluZztcbiAgdGFyZ2V0OiBzdHJpbmc7XG4gIGd1YXJkczogR3VhcmRzRGlyZWN0aXZlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25zRGlyZWN0aXZlIHtcbiAgW2tleTogc3RyaW5nXTogVHJhbnNpdGlvbkRpcmVjdGl2ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbW1lZGlhdGVEaXJlY3RpdmUge1xuICBpbW1lZGlhdGU6IHN0cmluZztcbiAgZ3VhcmRzOiBHdWFyZHNEaXJlY3RpdmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmVzdGVkSW1tZWRpYXRlRGlyZWN0aXZlIGV4dGVuZHMgSW1tZWRpYXRlRGlyZWN0aXZlIHtcbiAgaW1tZWRpYXRlOiBzdHJpbmc7XG4gIGd1YXJkczogR3VhcmRzRGlyZWN0aXZlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcmFsbGVsSW1tZWRpYXRlRGlyZWN0aXZlIGV4dGVuZHMgSW1tZWRpYXRlRGlyZWN0aXZlIHtcbiAgaW1tZWRpYXRlOiBzdHJpbmc7XG4gIGd1YXJkczogR3VhcmRzRGlyZWN0aXZlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2R1Y2VyIHtcbiAgKGNvbnRleHQ6IENvbnRleHQsIHBheWxvYWQ/OiBhbnkpOiBDb250ZXh0IHwgdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9kdWNlckRpcmVjdGl2ZSB7XG4gIHByb2R1Y2VyOiBQcm9kdWNlcjtcbiAgdHJhbnNpdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9kdWNlckRpcmVjdGl2ZVdpdGhUcmFuc2l0aW9uIGV4dGVuZHMgUHJvZHVjZXJEaXJlY3RpdmUge1xuICB0cmFuc2l0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjZXJEaXJlY3RpdmVXaXRob3V0VHJhbnNpdGlvbiB7XG4gIHByb2R1Y2VyOiBQcm9kdWNlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb24ge1xuICAoY29udGV4dDogQ29udGV4dCwgcGF5bG9hZD86IGFueSk6IFByb21pc2U8dm9pZCB8IGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uRGlyZWN0aXZlIHtcbiAgYWN0aW9uOiBBY3Rpb247XG4gIHN1Y2Nlc3M/OiBQcm9kdWNlckRpcmVjdGl2ZSB8IHN0cmluZyB8IG51bGw7XG4gIGZhaWx1cmU/OiBQcm9kdWNlckRpcmVjdGl2ZSB8IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3VhcmQge1xuICAoY29udGV4dDogQ29udGV4dCwgcGF5bG9hZD86IGFueSk6IGJvb2xlYW4gfCBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3VhcmREaXJlY3RpdmUge1xuICBndWFyZDogR3VhcmQ7XG4gIGZhaWx1cmU/OiBQcm9kdWNlckRpcmVjdGl2ZVdpdGhvdXRUcmFuc2l0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5lc3RlZEd1YXJkRGlyZWN0aXZlIGV4dGVuZHMgR3VhcmREaXJlY3RpdmUge1xuICBtYWNoaW5lOiBNYWNoaW5lO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEd1YXJkc0RpcmVjdGl2ZVxuICBleHRlbmRzIEFycmF5PEd1YXJkRGlyZWN0aXZlIHwgTmVzdGVkR3VhcmREaXJlY3RpdmU+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVzY3JpcHRpb25EaXJlY3RpdmUge1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJ1bkNvbGxlY3Rpb25cbiAgZXh0ZW5kcyBBcnJheTxcbiAgICB8IE5lc3RlZE1hY2hpbmVEaXJlY3RpdmVcbiAgICB8IEFjdGlvbkRpcmVjdGl2ZVxuICAgIHwgUHJvZHVjZXJEaXJlY3RpdmVXaXRob3V0VHJhbnNpdGlvblxuICAgIHwgVHJhbnNpdGlvbkRpcmVjdGl2ZVxuICAgIHwgSW1tZWRpYXRlRGlyZWN0aXZlXG4gICAgfCBEZXNjcmlwdGlvbkRpcmVjdGl2ZVxuICA+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEaXJlY3RpdmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHJ1bjogKEFjdGlvbkRpcmVjdGl2ZSB8IFByb2R1Y2VyRGlyZWN0aXZlKVtdO1xuICBvbjogVHJhbnNpdGlvbnNEaXJlY3RpdmU7XG4gIGltbWVkaWF0ZTogSW1tZWRpYXRlRGlyZWN0aXZlW107XG4gIGFyZ3M6IChcbiAgICB8IE5lc3RlZE1hY2hpbmVEaXJlY3RpdmVcbiAgICB8IEFjdGlvbkRpcmVjdGl2ZVxuICAgIHwgUHJvZHVjZXJEaXJlY3RpdmVcbiAgICB8IFRyYW5zaXRpb25EaXJlY3RpdmVcbiAgICB8IEltbWVkaWF0ZURpcmVjdGl2ZVxuICAgIHwgRGVzY3JpcHRpb25EaXJlY3RpdmVcbiAgKVtdO1xuICB0eXBlOiBzdHJpbmc7XG4gIG5lc3RlZDogTmVzdGVkTWFjaGluZURpcmVjdGl2ZVtdO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbmZvU3RhdGVEaXJlY3RpdmUgZXh0ZW5kcyBTdGF0ZURpcmVjdGl2ZSB7XG4gIHR5cGU6IFwiaW5mb1wiO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhcm5pbmdTdGF0ZURpcmVjdGl2ZSBleHRlbmRzIFN0YXRlRGlyZWN0aXZlIHtcbiAgdHlwZTogXCJ3YXJuaW5nXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFuZ2VyU3RhdGVEaXJlY3RpdmUgZXh0ZW5kcyBTdGF0ZURpcmVjdGl2ZSB7XG4gIHR5cGU6IFwiZGFuZ2VyXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJpbWFyeVN0YXRlRGlyZWN0aXZlIGV4dGVuZHMgU3RhdGVEaXJlY3RpdmUge1xuICB0eXBlOiBcInByaW1hcnlcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdWNjZXNzU3RhdGVEaXJlY3RpdmUgZXh0ZW5kcyBTdGF0ZURpcmVjdGl2ZSB7XG4gIHR5cGU6IFwic3VjY2Vzc1wiO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlc0RpcmVjdGl2ZSB7XG4gIFtrZXk6IHN0cmluZ106IFN0YXRlRGlyZWN0aXZlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcmFsbGVsRGlyZWN0aXZlIHtcbiAgcGFyYWxsZWw6IFJlY29yZDxzdHJpbmcsIE1hY2hpbmU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hY2hpbmUge1xuICBpZDogc3RyaW5nOyAvLyBUaGlzIHdpbGwgYmUgdGhlIHRpdGxlIG9mIHRoZSBtYWNoaW5lIGluIHNuYWtlIGNhc2UgKGUuZy4gJ215LW1hY2hpbmUnKVxuICB0aXRsZTogc3RyaW5nIHwgbnVsbDtcbiAgY29udGV4dDogQ29udGV4dDtcbiAgaXNBc3luYzogYm9vbGVhbjtcbiAgc3RhdGVzOiBTdGF0ZXNEaXJlY3RpdmU7XG4gIGluaXRpYWw6IHN0cmluZztcbiAgY3VycmVudDogc3RyaW5nO1xuICBmcm96ZW46IGJvb2xlYW47XG4gIGZhdGFsPzogRXJyb3I7XG4gIGhpc3Rvcnk6IHN0cmluZ1tdO1xuICBwYXJhbGxlbDogUGFyYWxsZWxEaXJlY3RpdmVbXCJwYXJhbGxlbFwiXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlIHtcbiAgbWFjaGluZTogTWFjaGluZTtcbiAgdHJhbnNpdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOZXN0ZWRNYWNoaW5lV2l0aFRyYW5zaXRpb25EaXJlY3RpdmVcbiAgZXh0ZW5kcyBOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlIHtcbiAgdHJhbnNpdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHREaXJlY3RpdmUge1xuICBjb250ZXh0OiBDb250ZXh0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluaXRpYWxEaXJlY3RpdmUge1xuICBpbml0aWFsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hvdWxkRnJlZXplRGlyZWN0aXZlIHtcbiAgZnJlZXplOiBib29sZWFuO1xufVxuXG5leHBvcnQgZW51bSBIaXN0b3J5VHlwZSB7XG4gIFRyYW5zaXRpb24gPSBcIlRyYW5zaXRpb25cIixcbiAgQWN0aW9uID0gXCJBY3Rpb25cIixcbiAgUHJvZHVjZXIgPSBcIlByb2R1Y2VyXCIsXG4gIFN0YXRlID0gXCJTdGF0ZVwiLFxuICBHdWFyZCA9IFwiR3VhcmRcIlxufVxuXG5leHBvcnQgY29uc3QgU1RBUlRfRVZFTlQgPSBcIl9fc3RhcnRfX1wiO1xuIiwiLyoqIEBtb2R1bGUgeC1yb2JvdC91dGlscyAqL1xuaW1wb3J0IHtcbiAgQWN0aW9uRGlyZWN0aXZlLFxuICBDb250ZXh0RGlyZWN0aXZlLFxuICBEZXNjcmlwdGlvbkRpcmVjdGl2ZSxcbiAgR3VhcmREaXJlY3RpdmUsXG4gIEltbWVkaWF0ZURpcmVjdGl2ZSxcbiAgSW5pdGlhbERpcmVjdGl2ZSxcbiAgTWFjaGluZSxcbiAgTmVzdGVkR3VhcmREaXJlY3RpdmUsXG4gIE5lc3RlZEltbWVkaWF0ZURpcmVjdGl2ZSxcbiAgTmVzdGVkTWFjaGluZURpcmVjdGl2ZSxcbiAgTmVzdGVkTWFjaGluZVdpdGhUcmFuc2l0aW9uRGlyZWN0aXZlLFxuICBQYXJhbGxlbERpcmVjdGl2ZSxcbiAgUGFyYWxsZWxJbW1lZGlhdGVEaXJlY3RpdmUsXG4gIFByb2R1Y2VyRGlyZWN0aXZlLFxuICBQcm9kdWNlckRpcmVjdGl2ZVdpdGhUcmFuc2l0aW9uLFxuICBQcm9kdWNlckRpcmVjdGl2ZVdpdGhvdXRUcmFuc2l0aW9uLFxuICBTVEFSVF9FVkVOVCxcbiAgU2hvdWxkRnJlZXplRGlyZWN0aXZlLFxuICBTdGF0ZURpcmVjdGl2ZSxcbiAgU3RhdGVzRGlyZWN0aXZlLFxuICBUcmFuc2l0aW9uRGlyZWN0aXZlXG59IGZyb20gXCIuL21hY2hpbmUvaW50ZXJmYWNlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFN0cmluZyhzdHI/OiBhbnkpOiBzdHIgaXMgc3RyaW5nIHtcbiAgcmV0dXJuIHN0ciAhPT0gbnVsbCAmJiB0eXBlb2Ygc3RyID09PSBcInN0cmluZ1wiICYmIHN0ci50cmltKCkubGVuZ3RoID4gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRPYmplY3Qob2JqOiBhbnkpOiBvYmogaXMgb2JqZWN0IHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm9kdWNlcihwcm9kdWNlcj86IGFueSk6IHByb2R1Y2VyIGlzIFByb2R1Y2VyRGlyZWN0aXZlIHtcbiAgcmV0dXJuIGlzVmFsaWRPYmplY3QocHJvZHVjZXIpICYmIFwicHJvZHVjZXJcIiBpbiBwcm9kdWNlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvZHVjZXJXaXRoVHJhbnNpdGlvbihcbiAgcHJvZHVjZXI/OiBhbnlcbik6IHByb2R1Y2VyIGlzIFByb2R1Y2VyRGlyZWN0aXZlV2l0aFRyYW5zaXRpb24ge1xuICByZXR1cm4gaXNQcm9kdWNlcihwcm9kdWNlcikgJiYgaXNWYWxpZFN0cmluZyhwcm9kdWNlci50cmFuc2l0aW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvZHVjZXJXaXRob3V0VHJhbnNpdGlvbihcbiAgcHJvZHVjZXI/OiBhbnlcbik6IHByb2R1Y2VyIGlzIFByb2R1Y2VyRGlyZWN0aXZlV2l0aG91dFRyYW5zaXRpb24ge1xuICByZXR1cm4gIWlzUHJvZHVjZXJXaXRoVHJhbnNpdGlvbihwcm9kdWNlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FjdGlvbihhY3Rpb24/OiBhbnkpOiBhY3Rpb24gaXMgQWN0aW9uRGlyZWN0aXZlIHtcbiAgcmV0dXJuIGlzVmFsaWRPYmplY3QoYWN0aW9uKSAmJiBcImFjdGlvblwiIGluIGFjdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW1tZWRpYXRlKGltbWVkaWF0ZT86IGFueSk6IGltbWVkaWF0ZSBpcyBJbW1lZGlhdGVEaXJlY3RpdmUge1xuICByZXR1cm4gaXNWYWxpZE9iamVjdChpbW1lZGlhdGUpICYmIFwiaW1tZWRpYXRlXCIgaW4gaW1tZWRpYXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNHdWFyZChndWFyZD86IGFueSk6IGd1YXJkIGlzIEd1YXJkRGlyZWN0aXZlIHtcbiAgcmV0dXJuIGlzVmFsaWRPYmplY3QoZ3VhcmQpICYmIFwiZ3VhcmRcIiBpbiBndWFyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTmVzdGVkR3VhcmQoZ3VhcmQ/OiBhbnkpOiBndWFyZCBpcyBOZXN0ZWRHdWFyZERpcmVjdGl2ZSB7XG4gIHJldHVybiBpc0d1YXJkKGd1YXJkKSAmJiBcIm1hY2hpbmVcIiBpbiBndWFyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhbnNpdGlvbihcbiAgdHJhbnNpdGlvbj86IGFueVxuKTogdHJhbnNpdGlvbiBpcyBUcmFuc2l0aW9uRGlyZWN0aXZlIHtcbiAgcmV0dXJuIChcbiAgICBpc1ZhbGlkT2JqZWN0KHRyYW5zaXRpb24pICYmXG4gICAgXCJ0cmFuc2l0aW9uXCIgaW4gdHJhbnNpdGlvbiAmJlxuICAgIFwidGFyZ2V0XCIgaW4gdHJhbnNpdGlvblxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzVHJhbnNpdGlvbihcbiAgc3RhdGU6IFN0YXRlRGlyZWN0aXZlLFxuICB0cmFuc2l0aW9uOiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNWYWxpZFN0cmluZyh0cmFuc2l0aW9uKSAmJiB0cmFuc2l0aW9uIGluIHN0YXRlLm9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzU3RhdGUobWFjaGluZTogTWFjaGluZSwgc3RhdGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNWYWxpZFN0cmluZyhzdGF0ZSkgJiYgc3RhdGUgaW4gbWFjaGluZS5zdGF0ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05lc3RlZE1hY2hpbmVEaXJlY3RpdmUoXG4gIG1hY2hpbmU/OiBhbnlcbik6IG1hY2hpbmUgaXMgTmVzdGVkTWFjaGluZURpcmVjdGl2ZSB7XG4gIHJldHVybiBpc1ZhbGlkT2JqZWN0KG1hY2hpbmUpICYmIFwibWFjaGluZVwiIGluIG1hY2hpbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05lc3RlZE1hY2hpbmVXaXRoVHJhbnNpdGlvbkRpcmVjdGl2ZShcbiAgbWFjaGluZT86IGFueVxuKTogbWFjaGluZSBpcyBOZXN0ZWRNYWNoaW5lV2l0aFRyYW5zaXRpb25EaXJlY3RpdmUge1xuICByZXR1cm4gaXNOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlKG1hY2hpbmUpICYmIGlzVmFsaWRTdHJpbmcobWFjaGluZS50cmFuc2l0aW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFjaGluZShtYWNoaW5lPzogYW55KTogbWFjaGluZSBpcyBNYWNoaW5lIHtcbiAgcmV0dXJuIChcbiAgICBpc1ZhbGlkT2JqZWN0KG1hY2hpbmUpICYmXG4gICAgXCJzdGF0ZXNcIiBpbiBtYWNoaW5lICYmXG4gICAgXCJpbml0aWFsXCIgaW4gbWFjaGluZSAmJlxuICAgIFwiY3VycmVudFwiIGluIG1hY2hpbmVcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RhdGVEaXJlY3RpdmUoc3RhdGU/OiBhbnkpOiBzdGF0ZSBpcyBTdGF0ZURpcmVjdGl2ZSB7XG4gIHJldHVybiAoXG4gICAgaXNWYWxpZE9iamVjdChzdGF0ZSkgJiZcbiAgICBcIm5hbWVcIiBpbiBzdGF0ZSAmJlxuICAgIFwicnVuXCIgaW4gc3RhdGUgJiZcbiAgICBcIm9uXCIgaW4gc3RhdGUgJiZcbiAgICBcImFyZ3NcIiBpbiBzdGF0ZVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb250ZXh0RGlyZWN0aXZlKGNvbnRleHQ/OiBhbnkpOiBjb250ZXh0IGlzIENvbnRleHREaXJlY3RpdmUge1xuICByZXR1cm4gaXNWYWxpZE9iamVjdChjb250ZXh0KSAmJiBcImNvbnRleHRcIiBpbiBjb250ZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdGF0ZXNEaXJlY3RpdmUoc3RhdGVzPzogYW55KTogc3RhdGVzIGlzIFN0YXRlc0RpcmVjdGl2ZSB7XG4gIHJldHVybiAoXG4gICAgaXNWYWxpZE9iamVjdChzdGF0ZXMpICYmXG4gICAgT2JqZWN0LmtleXMoc3RhdGVzKS5ldmVyeSgoa2V5KSA9PiBpc1ZhbGlkU3RyaW5nKGtleSkpICYmXG4gICAgT2JqZWN0LnZhbHVlcyhzdGF0ZXMpLmV2ZXJ5KChzdGF0ZSkgPT4gaXNTdGF0ZURpcmVjdGl2ZShzdGF0ZSkpXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmFsbGVsRGlyZWN0aXZlKFxuICBwYXJhbGxlbD86IGFueVxuKTogcGFyYWxsZWwgaXMgUGFyYWxsZWxEaXJlY3RpdmUge1xuICByZXR1cm4gaXNWYWxpZE9iamVjdChwYXJhbGxlbCkgJiYgXCJwYXJhbGxlbFwiIGluIHBhcmFsbGVsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTaG91bGRGcmVlemVEaXJlY3RpdmUoXG4gIHNob3VsZEZyZWV6ZT86IGFueVxuKTogc2hvdWxkRnJlZXplIGlzIFNob3VsZEZyZWV6ZURpcmVjdGl2ZSB7XG4gIHJldHVybiBpc1ZhbGlkT2JqZWN0KHNob3VsZEZyZWV6ZSkgJiYgXCJmcmVlemVcIiBpbiBzaG91bGRGcmVlemU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxEaXJlY3RpdmUoaW5pdGlhbD86IGFueSk6IGluaXRpYWwgaXMgSW5pdGlhbERpcmVjdGl2ZSB7XG4gIHJldHVybiBpc1ZhbGlkT2JqZWN0KGluaXRpYWwpICYmIFwiaW5pdGlhbFwiIGluIGluaXRpYWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Rlc2NyaXB0aW9uRGlyZWN0aXZlKFxuICBkZXNjcmlwdGlvbj86IGFueVxuKTogZGVzY3JpcHRpb24gaXMgRGVzY3JpcHRpb25EaXJlY3RpdmUge1xuICByZXR1cm4gaXNWYWxpZE9iamVjdChkZXNjcmlwdGlvbikgJiYgXCJkZXNjcmlwdGlvblwiIGluIGRlc2NyaXB0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOZXN0ZWRUcmFuc2l0aW9uKHRyYW5zaXRpb24/OiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzVmFsaWRTdHJpbmcodHJhbnNpdGlvbikgJiYgL15cXHcrXFwuLiskL2dpLnRlc3QodHJhbnNpdGlvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmFsbGVsVHJhbnNpdGlvbih0cmFuc2l0aW9uPzogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBpc1ZhbGlkU3RyaW5nKHRyYW5zaXRpb24pICYmIC9eXFx3K1xcLy4rJC9naS50ZXN0KHRyYW5zaXRpb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOZXN0ZWRJbW1lZGlhdGVEaXJlY3RpdmUoXG4gIGltbWVkaWF0ZT86IGFueVxuKTogaW1tZWRpYXRlIGlzIE5lc3RlZEltbWVkaWF0ZURpcmVjdGl2ZSB7XG4gIHJldHVybiBpc0ltbWVkaWF0ZShpbW1lZGlhdGUpICYmIGlzTmVzdGVkVHJhbnNpdGlvbihpbW1lZGlhdGUuaW1tZWRpYXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFyYWxsZWxJbW1lZGlhdGVEaXJlY3RpdmUoXG4gIGltbWVkaWF0ZT86IGFueVxuKTogaW1tZWRpYXRlIGlzIFBhcmFsbGVsSW1tZWRpYXRlRGlyZWN0aXZlIHtcbiAgcmV0dXJuIGlzSW1tZWRpYXRlKGltbWVkaWF0ZSkgJiYgaXNQYXJhbGxlbFRyYW5zaXRpb24oaW1tZWRpYXRlLmltbWVkaWF0ZSk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBkZWVwIGZyZWV6ZSBhbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBmcmVlemVcbiAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCBmcm96ZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZXBGcmVlemUob2JqOiBhbnkpIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmICFPYmplY3QuaXNGcm96ZW4ob2JqKSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBkZWVwRnJlZXplKG9ialtpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IHByb3AgaW4gb2JqKSB7XG4gICAgICAgIGRlZXBGcmVlemUob2JqW3Byb3BdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuLy8gQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgY29udGV4dFxuLy8gQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbi8vIEByZXR1cm5zIHtPYmplY3R9XG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDb250ZXh0KGNvbnRleHQ6IGFueSwgd2Vha01hcCA9IG5ldyBXZWFrTWFwKCkpOiBhbnkge1xuICAvLyBJZiBjb250ZXh0IGlzIGluIHRoZSB3ZWFrIG1hcCwgd2Ugd2lsbCB1c2UgdGhlIHdlYWsgbWFwIHZhbHVlXG4gIGlmICh3ZWFrTWFwLmhhcyhjb250ZXh0KSkge1xuICAgIHJldHVybiB3ZWFrTWFwLmdldChjb250ZXh0KTtcbiAgfVxuXG4gIC8vIElmIGNvbnRleHQgaXMgbnVsbCBvciB1bmRlZmluZWQsIHdlIHdpbGwgcmV0dXJuIGl0IGFzIGlzXG4gIGlmIChjb250ZXh0ID09PSBudWxsIHx8IGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgbGV0IHJlc3VsdDtcblxuICAvLyBDaGVjayBmb3IgZXZlcnkgdHlwZSBvZiBvYmplY3QgcHJvcGVydHkgYW5kIGNsb25lIGl0IGFjY29yZGluZ2x5XG4gIC8vIElmIGlzIGFuIGFycmF5LCB3ZSB3aWxsIGNsb25lIGl0IHJlY3Vyc2l2ZWx5XG4gIGlmIChBcnJheS5pc0FycmF5KGNvbnRleHQpKSB7XG4gICAgcmVzdWx0ID0gY29udGV4dC5tYXAoKGl0ZW0pID0+IGNsb25lQ29udGV4dChpdGVtLCB3ZWFrTWFwKSk7XG4gIH1cblxuICAvLyBJZiBpdCBpcyBhbiBvYmplY3QsIHdlIHdpbGwgY2xvbmUgaXQgcmVjdXJzaXZlbHlcbiAgZWxzZSBpZiAodHlwZW9mIGNvbnRleHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXN1bHQgPSB7fSBhcyBhbnk7XG4gICAgZm9yIChsZXQga2V5IGluIGNvbnRleHQpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gY2xvbmVDb250ZXh0KGNvbnRleHRba2V5XSwgd2Vha01hcCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgaXQgaXMgYSBkYXRlLCB3ZSB3aWxsIGNsb25lIGl0XG4gIGVsc2UgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmVzdWx0ID0gbmV3IERhdGUoY29udGV4dC5nZXRUaW1lKCkpO1xuICB9XG5cbiAgLy8gSWYgaXQgaXMgYSBTZXQsIHdlIHdpbGwgY2xvbmUgaXQgcmVjdXJzaXZlbHlcbiAgZWxzZSBpZiAoY29udGV4dCBpbnN0YW5jZW9mIFNldCkge1xuICAgIHJlc3VsdCA9IG5ldyBTZXQoY29udGV4dCk7XG4gIH1cblxuICAvLyBJZiBpdCBpcyBhIE1hcCwgd2Ugd2lsbCBjbG9uZSBpdCByZWN1cnNpdmVseVxuICBlbHNlIGlmIChjb250ZXh0IGluc3RhbmNlb2YgTWFwKSB7XG4gICAgbGV0IGFycmF5ID0gQXJyYXkuZnJvbShjb250ZXh0LCAoW2tleSwgdmFsXSkgPT4gW1xuICAgICAga2V5LFxuICAgICAgY2xvbmVDb250ZXh0KHZhbCwgd2Vha01hcClcbiAgICBdKSBhcyBbYW55LCBhbnldW107XG4gICAgcmVzdWx0ID0gbmV3IE1hcChhcnJheSk7XG4gIH1cblxuICAvLyBJZiBpdCBpcyBhIFJlZ0V4cCwgd2Ugd2lsbCBjbG9uZSBpdFxuICBlbHNlIGlmIChjb250ZXh0IGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoY29udGV4dC5zb3VyY2UsIGNvbnRleHQuZmxhZ3MpO1xuICB9XG5cbiAgLy8gSWYgaXQgaXMgYSBpbnN0YW5jZSBvZiBhIGNsYXNzLCB3ZSBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzXG4gIC8vIE9ubHkgaWYgd2UgdHVybiB0aGUgZmlyc3QgcGFyYW1ldGVyIHRvIHRydWVcbiAgZWxzZSBpZiAoZmFsc2UgJiYgY29udGV4dCBpbnN0YW5jZW9mIE9iamVjdCAmJiBjb250ZXh0LmNvbnN0cnVjdG9yKSB7XG4gICAgcmVzdWx0ID0gbmV3IGNvbnRleHQuY29uc3RydWN0b3IoY29udGV4dCk7XG4gIH1cblxuICAvLyBJZiBpdCBpcyBhIHByaW1pdGl2ZSwgd2Ugd2lsbCBqdXN0IGFzc2lnbiBpdFxuICBlbHNlIHtcbiAgICByZXN1bHQgPSBjb250ZXh0O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBZGQgdGhlIGNvbnRleHQgdG8gdGhlIHdlYWsgbWFwXG4gIHdlYWtNYXAuc2V0KGNvbnRleHQsIHJlc3VsdCk7XG5cbiAgLy8gUmV0dXJuIHRoZSBjbG9uZWQgY29udGV4dFxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBUaGlzIG1ldGhvZCBhbGxvd3MgdG8gZ2V0IGEgdmFsdWUgZnJvbSBhIHBhc3NlZCBvYmplY3QgdXNpbmcgZG90IG5vdGF0aW9uIHBhdGgsIGl0IGlzIG5vdCB1c2VkIGluIHRoZSBsaWJyYXJ5IGF0IHRoZSBtb21lbnRcbmZ1bmN0aW9uIGdldFByb3BlcnR5KFxuICBvYmo6IFJlY29yZDxzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wsIGFueT4sXG4gIHByb3BlcnR5OiBzdHJpbmcsXG4gIGRlZmF1bHRWYWx1ZT86IGFueVxuKTogYW55IHtcbiAgbGV0IHJlc3VsdCA9IG9iajtcblxuICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvcGVydHkgaXMgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgbGV0IHBhcnNlZCA9IHByb3BlcnR5LnNwbGl0KFwiLlwiKTtcbiAgbGV0IG5leHQ7XG5cbiAgd2hpbGUgKHBhcnNlZC5sZW5ndGgpIHtcbiAgICBuZXh0ID0gcGFyc2VkLnNoaWZ0KCk7XG5cbiAgICBpZiAodHlwZW9mIG5leHQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChuZXh0LmluZGV4T2YoXCJbXCIpID4gLTEpIHtcbiAgICAgIGxldCBpZHggPSBuZXh0LnJlcGxhY2UoL1xcRC9naSwgXCJcIik7XG4gICAgICBuZXh0ID0gbmV4dC5zcGxpdChcIltcIilbMF07XG4gICAgICBwYXJzZWQudW5zaGlmdChpZHgpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIG5leHQgaW4gcmVzdWx0ID09PSBmYWxzZSB8fFxuICAgICAgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHJlc3VsdCA9IHJlc3VsdFtuZXh0XTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgcmVzdWx0ID09PSBcInVuZGVmaW5lZFwiID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0aGF0IGlzIGN1cnJlbnRseSBydW5uaW5nXG4gKiBAcGFyYW0gY3VycmVudFN0YXRlT2JqZWN0IFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtYWNoaW5lXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiBUaGUgdHJhbnNpdGlvbiB0aGF0IHdlIHdhbnQgdG8gZXhlY3V0ZVxuICogQHJldHVybnMgYm9vbGVhbiB0cnVlIGlmIHRoZSB0cmFuc2l0aW9uIGNhbiBiZSBleGVjdXRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYW5NYWtlVHJhbnNpdGlvbihcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgY3VycmVudFN0YXRlT2JqZWN0OiBTdGF0ZURpcmVjdGl2ZSxcbiAgdHJhbnNpdGlvbjogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgaWYgKCFpc1ZhbGlkU3RyaW5nKHRyYW5zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRyYW5zaXRpb246ICR7dHJhbnNpdGlvbn1gKTtcbiAgfVxuXG4gIGxldCB0cmltbWVkVHJhbnNpdGlvbiA9IHRyYW5zaXRpb24udHJpbSgpO1xuXG4gIC8vIElmIHRoZSB0cmFuc2l0aW9uIGlzIHRoZSBTVEFSVF9FVkVOVCB3ZSB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHRoZSBpbml0aWFsIHN0YXRlIGFuZCB3ZSBoYXZlIG5vIGhpc3RvcnlcbiAgaWYgKHRyaW1tZWRUcmFuc2l0aW9uID09PSBTVEFSVF9FVkVOVCkge1xuICAgIHJldHVybiAoXG4gICAgICBjdXJyZW50U3RhdGVPYmplY3QubmFtZSA9PT0gbWFjaGluZS5pbml0aWFsICYmXG4gICAgICBtYWNoaW5lLmhpc3RvcnkubGVuZ3RoID09PSAxXG4gICAgKTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHdlIGhhdmUgYSBub3JtYWwgdHJhbnNpdGlvbiBvciBhIG5lc3RlZCB0cmFuc2l0aW9uIChuZXN0ZWQgdHJhbnNpdGlvbnMgYXJlIGRvdCBzZXBhcmF0ZWQpXG4gIGlmIChcbiAgICBpc05lc3RlZFRyYW5zaXRpb24odHJpbW1lZFRyYW5zaXRpb24pIHx8XG4gICAgaXNQYXJhbGxlbFRyYW5zaXRpb24odHJpbW1lZFRyYW5zaXRpb24pXG4gICkge1xuICAgIC8vIEdldCB0aGUgbmVzdGVkIHRyYW5zaXRpb24gcGFydHNcbiAgICBsZXQgdHJhbnNpdGlvblBhcnRzID0gaXNOZXN0ZWRUcmFuc2l0aW9uKHRyaW1tZWRUcmFuc2l0aW9uKVxuICAgICAgPyB0cmltbWVkVHJhbnNpdGlvbi5zcGxpdChcIi5cIilcbiAgICAgIDogdHJpbW1lZFRyYW5zaXRpb24uc3BsaXQoXCIvXCIpO1xuICAgIC8vIFRoZSBmaXJzdCBwYXJ0IG11c3QgYmUgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICBsZXQgc3RhdGVOYW1lID0gdHJhbnNpdGlvblBhcnRzLnNoaWZ0KCk7XG4gICAgLy8gVGhlIHNlY29uZCBwYXJ0IG11c3QgYmUgdGhlIHRyYW5zaXRpb25cbiAgICBsZXQgdHJhbnNpdGlvbk5hbWUgPSBpc05lc3RlZFRyYW5zaXRpb24odHJpbW1lZFRyYW5zaXRpb24pXG4gICAgICA/IHRyYW5zaXRpb25QYXJ0cy5qb2luKFwiLlwiKVxuICAgICAgOiB0cmFuc2l0aW9uUGFydHMuam9pbihcIi9cIik7XG5cbiAgICAvLyBJZiB3ZSBoYXZlIG5vIHN0YXRlTmFtZSwgd2UgY2FuJ3QgbWFrZSBhIHRyYW5zaXRpb25cbiAgICBpZiAoIXN0YXRlTmFtZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzdGF0ZU5hbWUgaXMgaW4gdGhlIHBhcmFsbGVsIG9iamVjdCBjaGVjayBpZiB3ZSBjYW4gbWFrZSB0aGUgdHJhbnNpdGlvbiBpbiB0aGUgcGFyYWxsZWwgbWFjaGluZVxuICAgIGlmIChzdGF0ZU5hbWUgaW4gbWFjaGluZS5wYXJhbGxlbCkge1xuICAgICAgbGV0IHBhcmFsbGVsTWFjaGluZSA9IG1hY2hpbmUucGFyYWxsZWxbc3RhdGVOYW1lXTtcbiAgICAgIHJldHVybiBjYW5NYWtlVHJhbnNpdGlvbihcbiAgICAgICAgcGFyYWxsZWxNYWNoaW5lLFxuICAgICAgICBwYXJhbGxlbE1hY2hpbmUuc3RhdGVzW3BhcmFsbGVsTWFjaGluZS5jdXJyZW50XSxcbiAgICAgICAgdHJhbnNpdGlvbk5hbWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGN1cnJlbnQgc3RhdGUgbmFtZSBpcyBub3QgdGhlIHNhbWUgYXMgdGhlIHN0YXRlTmFtZSByZXR1cm4gZmFsc2VcbiAgICBpZiAoc3RhdGVOYW1lICE9PSBjdXJyZW50U3RhdGVPYmplY3QubmFtZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBjdXJyZW50IHN0YXRlIGRvZXNuJ3QgaGF2ZSBhIG5lc3RlZCBtYWNoaW5lIHJldHVybiBmYWxzZVxuICAgIGlmIChjdXJyZW50U3RhdGVPYmplY3QubmVzdGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFdlIGxvb3AgdGhyb3VnaCB0aGUgbmVzdGVkIG1hY2hpbmVzIGFuZCBjaGVjayBpZiB3ZSBjYW4gbWFrZSB0aGUgdHJhbnNpdGlvblxuICAgIGZvciAobGV0IG5lc3RlZE1hY2hpbmUgb2YgY3VycmVudFN0YXRlT2JqZWN0Lm5lc3RlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBjYW5NYWtlVHJhbnNpdGlvbihcbiAgICAgICAgICBuZXN0ZWRNYWNoaW5lLm1hY2hpbmUsXG4gICAgICAgICAgbmVzdGVkTWFjaGluZS5tYWNoaW5lLnN0YXRlc1tuZXN0ZWRNYWNoaW5lLm1hY2hpbmUuY3VycmVudF0sXG4gICAgICAgICAgdHJhbnNpdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlIGdldCBoZXJlLCB3ZSBoYXZlIGEgbm9ybWFsIHRyYW5zaXRpb25cbiAgcmV0dXJuIGhhc1RyYW5zaXRpb24oY3VycmVudFN0YXRlT2JqZWN0LCB0cmltbWVkVHJhbnNpdGlvbik7XG59XG5cbmV4cG9ydCBjb25zdCB0aXRsZVRvSWQgPSAoc3RyOiBzdHJpbmcpID0+XG4gIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyhcXHN8XFxXKS9nLCBcIlwiKTtcbiIsIi8qKlxuICogQG1vZHVsZSB4LXJvYm90XG4gKiBAZGVzY3JpcHRpb24gQ3JlYXRlIGEgbmV3IG1hY2hpbmUgZnJvbSBhIHNldCBvZiBkaXJlY3RpdmVzLlxuICogKi9cbmltcG9ydCB7XG4gIEFjdGlvbixcbiAgQWN0aW9uRGlyZWN0aXZlLFxuICBDb250ZXh0LFxuICBDb250ZXh0RGlyZWN0aXZlLFxuICBEYW5nZXJTdGF0ZURpcmVjdGl2ZSxcbiAgRGVzY3JpcHRpb25EaXJlY3RpdmUsXG4gIEd1YXJkLFxuICBHdWFyZERpcmVjdGl2ZSxcbiAgR3VhcmRzRGlyZWN0aXZlLFxuICBIaXN0b3J5VHlwZSxcbiAgSW1tZWRpYXRlRGlyZWN0aXZlLFxuICBJbmZvU3RhdGVEaXJlY3RpdmUsXG4gIEluaXRpYWxEaXJlY3RpdmUsXG4gIE1hY2hpbmUsXG4gIE1hY2hpbmVBcmd1bWVudHMsXG4gIE5lc3RlZEd1YXJkRGlyZWN0aXZlLFxuICBOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlLFxuICBQYXJhbGxlbERpcmVjdGl2ZSxcbiAgUHJpbWFyeVN0YXRlRGlyZWN0aXZlLFxuICBQcm9kdWNlcixcbiAgUHJvZHVjZXJEaXJlY3RpdmUsXG4gIFByb2R1Y2VyRGlyZWN0aXZlV2l0aG91dFRyYW5zaXRpb24sXG4gIFJ1bkNvbGxlY3Rpb24sXG4gIFNob3VsZEZyZWV6ZURpcmVjdGl2ZSxcbiAgU3RhdGVEaXJlY3RpdmUsXG4gIFN0YXRlc0RpcmVjdGl2ZSxcbiAgU3VjY2Vzc1N0YXRlRGlyZWN0aXZlLFxuICBUcmFuc2l0aW9uRGlyZWN0aXZlLFxuICBUcmFuc2l0aW9uc0RpcmVjdGl2ZSxcbiAgV2FybmluZ1N0YXRlRGlyZWN0aXZlXG59IGZyb20gXCIuL2ludGVyZmFjZXNcIjtcbmltcG9ydCB7XG4gIGRlZXBGcmVlemUsXG4gIGhhc1RyYW5zaXRpb24sXG4gIGlzQWN0aW9uLFxuICBpc0NvbnRleHREaXJlY3RpdmUsXG4gIGlzRGVzY3JpcHRpb25EaXJlY3RpdmUsXG4gIGlzSW1tZWRpYXRlLFxuICBpc0luaXRpYWxEaXJlY3RpdmUsXG4gIGlzTWFjaGluZSxcbiAgaXNOZXN0ZWRJbW1lZGlhdGVEaXJlY3RpdmUsXG4gIGlzTmVzdGVkTWFjaGluZURpcmVjdGl2ZSxcbiAgaXNQYXJhbGxlbERpcmVjdGl2ZSxcbiAgaXNQYXJhbGxlbEltbWVkaWF0ZURpcmVjdGl2ZSxcbiAgaXNQcm9kdWNlcixcbiAgaXNQcm9kdWNlcldpdGhUcmFuc2l0aW9uLFxuICBpc1Nob3VsZEZyZWV6ZURpcmVjdGl2ZSxcbiAgaXNTdGF0ZXNEaXJlY3RpdmUsXG4gIGlzVHJhbnNpdGlvbixcbiAgaXNWYWxpZE9iamVjdCxcbiAgaXNWYWxpZFN0cmluZyxcbiAgdGl0bGVUb0lkXG59IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIFdlIHdpbGwgY3JlYXRlIGEgZmluaXRlIHN0YXRlIG1hY2hpbmUgbWFuYWdlclxuICpcbiAqIFRoaXMgbWFuYWdlciB3aWxsIGhhbmRsZSB0aGUgY3JlYXRpb24gb2YgdGhlIGZpbml0ZSBzdGF0ZSBtYWNoaW5lXG4gKiBJdCBtdXN0IGJlIGZ1bmN0aW9uYWwgYW5kIGltbXV0YWJsZVxuICogQW5kIGl0IG11c3QgYmUgYWJsZSB0byBiZSBzZXJpYWxpemVkIGFuZCByZXR1cm4gYSBKU09OIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG1hY2hpbmVcbiAqICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYWNoaW5lXG4gKiBAcGFyYW0gdGl0bGUgVGl0bGUgb2YgdGhlIG1hY2hpbmUgLSBUaGlzIHdpbGwgYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgaWQgb2YgdGhlIG1hY2hpbmVcbiAqIEBwYXJhbSBhcmdzIEFyZ3VtZW50cyB0byB0aGUgbWFjaGluZVxuICogQHJldHVybnMgTWFjaGluZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWNoaW5lKHRpdGxlOiBzdHJpbmcsIC4uLmFyZ3M6IE1hY2hpbmVBcmd1bWVudHMpOiBNYWNoaW5lIHtcbiAgLy8gQ3JlYXRlIHRoZSBtYWNoaW5lXG4gIGxldCBteU1hY2hpbmU6IE1hY2hpbmUgPSB7XG4gICAgaWQ6IHRpdGxlVG9JZCh0aXRsZSB8fCBcIngtcm9ib3RcIiksXG4gICAgdGl0bGUsXG4gICAgc3RhdGVzOiB7fSxcbiAgICBjb250ZXh0OiB7fSxcbiAgICBpbml0aWFsOiBcIlwiLFxuICAgIGN1cnJlbnQ6IFwiXCIsXG4gICAgZnJvemVuOiB0cnVlLFxuICAgIGlzQXN5bmM6IGZhbHNlLFxuICAgIGhpc3Rvcnk6IFtdLFxuICAgIHBhcmFsbGVsOiB7fVxuICB9O1xuXG4gIGZvciAobGV0IGFyZyBvZiBhcmdzKSB7XG4gICAgLy8gSWYgYXJnIGlzIGEgc3RyaW5nIHRoZW4gaXQgaXMgdGhlIHRpdGxlXG4gICAgaWYgKGlzVmFsaWRTdHJpbmcoYXJnKSkge1xuICAgICAgdGl0bGUgPSBhcmc7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGFyZ3VtZW50IGlzIGEgc3RhdGVzIGRpcmVjdGl2ZSB0aGVuIG1lcmdlIGl0IGludG8gdGhlIHN0YXRlc1xuICAgIGlmIChpc1N0YXRlc0RpcmVjdGl2ZShhcmcpKSB7XG4gICAgICBteU1hY2hpbmUuc3RhdGVzID0geyAuLi5teU1hY2hpbmUuc3RhdGVzLCAuLi5hcmcgfTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYXJndW1lbnQgaXMgYSBwYXJhbGxlbCBkaXJlY3RpdmUgdGhlbiBtZXJnZSBpdCBpbnRvIHRoZSBwYXJhbGxlbFxuICAgIGlmIChpc1BhcmFsbGVsRGlyZWN0aXZlKGFyZykpIHtcbiAgICAgIG15TWFjaGluZS5wYXJhbGxlbCA9IHsgLi4ubXlNYWNoaW5lLnBhcmFsbGVsLCAuLi5hcmcucGFyYWxsZWwgfTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYXJndW1lbnQgaXMgYSBjb250ZXh0IGRpcmVjdGl2ZSB0aGVuIG1lcmdlIGl0IGludG8gdGhlIGNvbnRleHRcbiAgICBpZiAoaXNDb250ZXh0RGlyZWN0aXZlKGFyZykpIHtcbiAgICAgIGxldCBuZXdDb250ZXh0ID1cbiAgICAgICAgdHlwZW9mIGFyZy5jb250ZXh0ID09PSBcImZ1bmN0aW9uXCIgPyBhcmcuY29udGV4dCgpIDogYXJnLmNvbnRleHQ7XG4gICAgICBpZiAoIWlzVmFsaWRPYmplY3QobmV3Q29udGV4dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiVGhlIGNvbnRleHQgcGFzc2VkIHRvIHRoZSBtYWNoaW5lIG11c3QgYmUgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9iamVjdC5cIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBteU1hY2hpbmUuY29udGV4dCA9IHsgLi4ubXlNYWNoaW5lLmNvbnRleHQsIC4uLm5ld0NvbnRleHQgfTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5pdGlhbCBkaXJlY3RpdmUgdGhlbiBzZXQgdGhlIGluaXRpYWwgc3RhdGVcbiAgICBpZiAoaXNJbml0aWFsRGlyZWN0aXZlKGFyZykpIHtcbiAgICAgIG15TWFjaGluZS5pbml0aWFsID0gYXJnLmluaXRpYWw7XG4gICAgICBteU1hY2hpbmUuY3VycmVudCA9IG15TWFjaGluZS5pbml0aWFsO1xuICAgICAgbXlNYWNoaW5lLmhpc3RvcnkucHVzaChgJHtIaXN0b3J5VHlwZS5TdGF0ZX06ICR7bXlNYWNoaW5lLmluaXRpYWx9YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGFyZ3VtZW50IGlzIGEgc2hvdWxkRnJlZXplIGRpcmVjdGl2ZSB0aGVuIHNldCB0aGUgZnJlZXplIGZsYWdcbiAgICBpZiAoaXNTaG91bGRGcmVlemVEaXJlY3RpdmUoYXJnKSkge1xuICAgICAgbXlNYWNoaW5lLmZyb3plbiA9IGFyZy5mcmVlemU7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgZnJlZXplIGlzIHRydWUsIHdlIHdpbGwgZGVlcCBmcmVlemUgdGhlIGNvbnRleHRcbiAgaWYgKG15TWFjaGluZS5mcm96ZW4pIHtcbiAgICBkZWVwRnJlZXplKG15TWFjaGluZS5jb250ZXh0KTtcbiAgfVxuXG4gIC8vIEZpbmQgaWYgdGhlIG1hY2hpbmUgaXMgYXN5bmMsIGlmIHNvLCBhZGQgdGhlIGFzeW5jIHByb3BlcnR5XG4gIC8vIE1hY2hpbiBpcyBhc3luYyBpZiB0aGVyZSBpcyBhIHN0YXRlIHdpdGggYW4gYWN0aW9uIGluIHRoZSBydW4gYXJyYXlcbiAgZm9yIChsZXQgc3RhdGUgaW4gbXlNYWNoaW5lLnN0YXRlcykge1xuICAgIGlmIChteU1hY2hpbmUuc3RhdGVzW3N0YXRlXS5ydW4ubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRmluZCBhbiBhY3Rpb24gaW4gdGhlIHJ1biBhcnJheVxuICAgICAgbGV0IGFjdGlvbiA9IG15TWFjaGluZS5zdGF0ZXNbc3RhdGVdLnJ1bi5maW5kKGlzQWN0aW9uKTtcbiAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgbXlNYWNoaW5lLmlzQXN5bmMgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBJZiBtYWNoaW5lIGlzbid0IGFzeW5jLCB3ZSBzaG91bGQgY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBuZXN0ZWQgbWFjaGluZXMgdGhhdCBhcmUgYXN5bmMsIGlmIHNvLCB3ZSBzaG91bGQgdHVybiB0aGUgYXN5bmMgZmxhZyBvblxuICBpZiAobXlNYWNoaW5lLmlzQXN5bmMgPT09IGZhbHNlKSB7XG4gICAgZm9yIChsZXQgc3RhdGUgaW4gbXlNYWNoaW5lLnN0YXRlcykge1xuICAgICAgaWYgKG15TWFjaGluZS5zdGF0ZXNbc3RhdGVdLm5lc3RlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAobGV0IG5lc3RlZE1hY2hpbmUgb2YgbXlNYWNoaW5lLnN0YXRlc1tzdGF0ZV0ubmVzdGVkKSB7XG4gICAgICAgICAgaWYgKG5lc3RlZE1hY2hpbmUubWFjaGluZS5pc0FzeW5jKSB7XG4gICAgICAgICAgICBteU1hY2hpbmUuaXNBc3luYyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBJZiBtYWNoaW5lIGlzbid0IGFzeW5jLCB3ZSBzaG91bGQgY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBwYXJhbGxlbCBtYWNoaW5lcyB0aGF0IGFyZSBhc3luYywgaWYgc28sIHdlIHNob3VsZCB0dXJuIHRoZSBhc3luYyBmbGFnIG9uXG4gIGlmIChteU1hY2hpbmUuaXNBc3luYyA9PT0gZmFsc2UpIHtcbiAgICBmb3IgKGxldCBwYXJhbGxlbCBpbiBteU1hY2hpbmUucGFyYWxsZWwpIHtcbiAgICAgIGlmIChteU1hY2hpbmUucGFyYWxsZWxbcGFyYWxsZWxdLmlzQXN5bmMpIHtcbiAgICAgICAgbXlNYWNoaW5lLmlzQXN5bmMgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIG1hY2hpbmVcbiAgcmV0dXJuIG15TWFjaGluZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gc3RhdGVzIEFycmF5IG9mIHN0YXRlIGRpcmVjdGl2ZXMgbWFkZSB3aXRoIHRoZSBzdGF0ZSBtZXRob2RcbiAqIEByZXR1cm5zIFN0YXRlc0RpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZXMoLi4uc3RhdGVzOiBTdGF0ZURpcmVjdGl2ZVtdKTogU3RhdGVzRGlyZWN0aXZlIHtcbiAgbGV0IG5ld1N0YXRlczogU3RhdGVzRGlyZWN0aXZlID0ge307XG5cbiAgZm9yIChsZXQgc3RhdGUgb2Ygc3RhdGVzKSB7XG4gICAgbmV3U3RhdGVzW3N0YXRlLm5hbWVdID0gc3RhdGU7XG4gIH1cblxuICByZXR1cm4gbmV3U3RhdGVzO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbWFjaGluZXMgQXJyYXkgb2YgcGFyYWxsZWwgbWFjaGluZXNcbiAqIEByZXR1cm5zIFBhcmFsbGVsRGlyZWN0aXZlXG4gKiBAY2F0ZWdvcnkgQ3JlYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcmFsbGVsKC4uLm1hY2hpbmVzOiBNYWNoaW5lW10pOiBQYXJhbGxlbERpcmVjdGl2ZSB7XG4gIGxldCBvYmo6IFBhcmFsbGVsRGlyZWN0aXZlID0geyBwYXJhbGxlbDoge30gfTtcblxuICBmb3IgKGxldCBtYWNoaW5lIG9mIG1hY2hpbmVzKSB7XG4gICAgb2JqLnBhcmFsbGVsW21hY2hpbmUuaWRdID0gbWFjaGluZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGJlIHBhc3NlZCB0byB0aGUgbWFjaGluZSwgY2FuIGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9iamVjdFxuICogQHJldHVybnMgQ29udGV4dERpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250ZXh0KGNvbnRleHQ6IENvbnRleHQgfCBGdW5jdGlvbik6IENvbnRleHREaXJlY3RpdmUge1xuICByZXR1cm4ge1xuICAgIGNvbnRleHRcbiAgfTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGluaXRpYWwgVGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIG1hY2hpbmVcbiAqIEByZXR1cm5zIEluaXRpYWxEaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbChpbml0aWFsOiBzdHJpbmcpOiBJbml0aWFsRGlyZWN0aXZlIHtcbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsXG4gIH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBmcmVlemUgSWYgZmFsc2UgdGhlIG1hY2hpbmUgd2lsbCBub3QgYmUgZnJvemVuLiBUaGUgbWFjaGluZSB3aWxsIGJlIGZyb3plbiBieSBkZWZhdWx0LlxuICogQHJldHVybnMgU2hvdWxkRnJlZXplRGlyZWN0aXZlXG4gKiBAY2F0ZWdvcnkgQ3JlYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEZyZWV6ZShmcmVlemU6IGJvb2xlYW4pOiBTaG91bGRGcmVlemVEaXJlY3RpdmUge1xuICByZXR1cm4ge1xuICAgIGZyZWV6ZVxuICB9O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgc3RhdGVcbiAqIEBwYXJhbSBhcmdzIG5lc3RlZCBtYWNoaW5lcywgYWN0aW9ucywgcHJvZHVjZXJzLCB0cmFuc2l0aW9ucywgZXRjLlxuICogQHJldHVybnMgU3RhdGVEaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhdGUobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBSdW5Db2xsZWN0aW9uKTogU3RhdGVEaXJlY3RpdmUge1xuICBsZXQgcnVuOiAoQWN0aW9uRGlyZWN0aXZlIHwgUHJvZHVjZXJEaXJlY3RpdmUpW10gPSBbXTtcbiAgbGV0IG9uOiBUcmFuc2l0aW9uc0RpcmVjdGl2ZSA9IHt9O1xuICBsZXQgaW1tZWRpYXRlOiBJbW1lZGlhdGVEaXJlY3RpdmVbXSA9IFtdO1xuICBsZXQgbmVzdGVkOiBOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlW10gPSBbXTtcbiAgbGV0IGRlc2NyaXB0aW9uO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBhcmcgPSBhcmdzW2ldO1xuICAgIC8vIElmIGlzIGEgbmVzdGVkIG1hY2hpbmVcbiAgICBpZiAoaXNOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlKGFyZykpIHtcbiAgICAgIG5lc3RlZC5wdXNoKGFyZyk7XG4gICAgICAvLyBJZiBpcyBhY3Rpb24gb3IgcHJvZHVjZXIgYWRkIGl0IHRvIHRoZSBydW4gYXJyYXlcbiAgICB9IGVsc2UgaWYgKGlzQWN0aW9uKGFyZykgfHwgaXNQcm9kdWNlcihhcmcpKSB7XG4gICAgICBydW4ucHVzaChhcmcpO1xuXG4gICAgICAvLyBJZiBpcyBhbiBhY3Rpb24gYW5kIGhhcyBhIHN1Y2Nlc3MgdHJhbnNpdGlvbiBvciBhIGZhaWx1cmUgdHJhbnNpdGlvbiwgdGhlbiB0cnkgdG8gYWRkIHRoZW0gdG8gdGhlIG9uIG9iamVjdFxuICAgICAgaWYgKGlzQWN0aW9uKGFyZykpIHtcbiAgICAgICAgbGV0IHN1Y2Nlc3NUcmFuc2l0aW9uID0gaXNWYWxpZFN0cmluZyhhcmcuc3VjY2VzcylcbiAgICAgICAgICA/IGFyZy5zdWNjZXNzXG4gICAgICAgICAgOiBpc1Byb2R1Y2VyV2l0aFRyYW5zaXRpb24oYXJnLnN1Y2Nlc3MpXG4gICAgICAgICAgPyBhcmcuc3VjY2Vzcy50cmFuc2l0aW9uXG4gICAgICAgICAgOiBudWxsO1xuICAgICAgICAvLyBJZiBzdWNjZXNzIGlzIGEgdHJhbnNpdGlvblxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNWYWxpZFN0cmluZyhzdWNjZXNzVHJhbnNpdGlvbikgJiZcbiAgICAgICAgICBoYXNUcmFuc2l0aW9uKHsgb24gfSBhcyBTdGF0ZURpcmVjdGl2ZSwgc3VjY2Vzc1RyYW5zaXRpb24pID09PSBmYWxzZVxuICAgICAgICApIHtcbiAgICAgICAgICBvbltzdWNjZXNzVHJhbnNpdGlvbl0gPSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBzdWNjZXNzVHJhbnNpdGlvbixcbiAgICAgICAgICAgIHRhcmdldDogc3VjY2Vzc1RyYW5zaXRpb24sXG4gICAgICAgICAgICBndWFyZHM6IFtdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmYWlsdXJlVHJhbnNpdGlvbiA9IGlzVmFsaWRTdHJpbmcoYXJnLmZhaWx1cmUpXG4gICAgICAgICAgPyBhcmcuZmFpbHVyZVxuICAgICAgICAgIDogaXNQcm9kdWNlcldpdGhUcmFuc2l0aW9uKGFyZy5mYWlsdXJlKVxuICAgICAgICAgID8gYXJnLmZhaWx1cmUudHJhbnNpdGlvblxuICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLy8gSWYgZmFpbHVyZSBpcyBhIHRyYW5zaXRpb25cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzVmFsaWRTdHJpbmcoZmFpbHVyZVRyYW5zaXRpb24pICYmXG4gICAgICAgICAgaGFzVHJhbnNpdGlvbih7IG9uIH0gYXMgU3RhdGVEaXJlY3RpdmUsIGZhaWx1cmVUcmFuc2l0aW9uKSA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgb25bZmFpbHVyZVRyYW5zaXRpb25dID0ge1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogZmFpbHVyZVRyYW5zaXRpb24sXG4gICAgICAgICAgICB0YXJnZXQ6IGZhaWx1cmVUcmFuc2l0aW9uLFxuICAgICAgICAgICAgZ3VhcmRzOiBbXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgaXMgaW1tZWRpYXRlIHRyYW5zaXRpb25cbiAgICB9IGVsc2UgaWYgKGlzSW1tZWRpYXRlKGFyZykpIHtcbiAgICAgIC8vIEFkZCB0aGUgaW1tZWRpYXRlIHRyYW5zaXRpb24gdG8gdGhlIGltbWVkaWF0ZSBhcnJheVxuICAgICAgaW1tZWRpYXRlLnB1c2goYXJnKTtcblxuICAgICAgbGV0IHRyYW5zaXRpb24gPSBhcmcuaW1tZWRpYXRlO1xuICAgICAgbGV0IGd1YXJkcyA9IGFyZy5ndWFyZHM7XG5cbiAgICAgIC8vIElmIHRoZSBpbW1lZGlhdGUgdHJhbnNpdGlvbiBpcyBub3QgYSBuZXN0ZWQgb3IgcGFyYWxsZWwgbWFjaGluZSB0aGVuIGFkZCBpdCB0byB0aGUgb24gb2JqZWN0XG4gICAgICBpZiAoXG4gICAgICAgICFpc05lc3RlZEltbWVkaWF0ZURpcmVjdGl2ZShhcmcpICYmXG4gICAgICAgICFpc1BhcmFsbGVsSW1tZWRpYXRlRGlyZWN0aXZlKGFyZylcbiAgICAgICkge1xuICAgICAgICAvLyBXZSB0dXJuIHRoZSBpbW1lZGlhdGUgdHJhbnNpdGlvbiBpbnRvIGEgbm9ybWFsIHRyYW5zaXRpb24gc28gdGhhdCB0aGUgbWFjaGluZSBjYW4gaGFuZGxlIGl0XG4gICAgICAgIG9uW3RyYW5zaXRpb25dID0geyB0YXJnZXQ6IHRyYW5zaXRpb24sIHRyYW5zaXRpb246IHRyYW5zaXRpb24sIGd1YXJkcyB9O1xuICAgICAgfVxuXG4gICAgICAvLyBpZiBpcyBhIHRyYW5zaXRpb25cbiAgICB9IGVsc2UgaWYgKGlzVHJhbnNpdGlvbihhcmcpKSB7XG4gICAgICBvblthcmcudHJhbnNpdGlvbl0gPSBhcmc7XG4gICAgfSBlbHNlIGlmIChpc0Rlc2NyaXB0aW9uRGlyZWN0aXZlKGFyZykpIHtcbiAgICAgIGRlc2NyaXB0aW9uID0gYXJnLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICBuZXN0ZWQsXG4gICAgcnVuLFxuICAgIG9uLFxuICAgIGltbWVkaWF0ZSxcbiAgICBhcmdzLFxuICAgIHR5cGU6IFwiZGVmYXVsdFwiLFxuICAgIGRlc2NyaXB0aW9uXG4gIH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0cmFuc2l0aW9uTmFtZSBUaGUgbmFtZSBvZiB0aGUgdHJhbnNpdGlvblxuICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHN0YXRlIG9mIHRoZSB0cmFuc2l0aW9uXG4gKiBAcGFyYW0gZ3VhcmRzIFRoZSBndWFyZHMgb2YgdGhlIHRyYW5zaXRpb25cbiAqIEByZXR1cm5zIFRyYW5zaXRpb25EaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNpdGlvbihcbiAgdHJhbnNpdGlvbk5hbWU6IHN0cmluZyxcbiAgdGFyZ2V0OiBzdHJpbmcsXG4gIC4uLmd1YXJkczogR3VhcmRzRGlyZWN0aXZlXG4pOiBUcmFuc2l0aW9uRGlyZWN0aXZlIHtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uTmFtZSxcbiAgICB0YXJnZXQsXG4gICAgZ3VhcmRzXG4gIH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBhY3Rpb24gVGhlIGFjdGlvbiB0byBiZSBydW5cbiAqIEBwYXJhbSBvblN1Y2Nlc3NQcm9kdWNlciBUaGUgcHJvZHVjZXIgdG8gYmUgcnVuIG9uIHN1Y2Nlc3Mgd2l0aCBhbiBvcHRpb25hbCB0cmFuc2l0aW9uIG5hbWUgb3IgYSB0cmFuc2l0aW9uIG5hbWVcbiAqIEBwYXJhbSBvbkZhaWx1cmVQcm9kdWNlciBUaGUgcHJvZHVjZXIgdG8gYmUgcnVuIG9uIGZhaWx1cmUgd2l0aCBhbiBvcHRpb25hbCB0cmFuc2l0aW9uIG5hbWUgb3IgYSB0cmFuc2l0aW9uIG5hbWVcbiAqIEByZXR1cm5zIEFjdGlvbkRpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb24oXG4gIGFjdGlvbjogQWN0aW9uLFxuICBvblN1Y2Nlc3NQcm9kdWNlcj86IFByb2R1Y2VyRGlyZWN0aXZlIHwgc3RyaW5nIHwgbnVsbCxcbiAgb25GYWlsdXJlUHJvZHVjZXI/OiBQcm9kdWNlckRpcmVjdGl2ZSB8IHN0cmluZyB8IG51bGxcbik6IEFjdGlvbkRpcmVjdGl2ZSB7XG4gIHJldHVybiB7XG4gICAgYWN0aW9uLFxuICAgIHN1Y2Nlc3M6IG9uU3VjY2Vzc1Byb2R1Y2VyLFxuICAgIGZhaWx1cmU6IG9uRmFpbHVyZVByb2R1Y2VyXG4gIH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBndWFyZCBUaGUgZ3VhcmQgdG8gYmUgcnVuXG4gKiBAcGFyYW0gb25GYWlsdXJlUHJvZHVjZXIgVGhlIHByb2R1Y2VyIHRvIGJlIHJ1biBvbiBmYWlsdXJlLCB0aGlzIHByb2R1Y2VyIHNob3VsZCBub3QgaGF2ZSBhIHRyYW5zaXRpb24gbmFtZVxuICogQHJldHVybnMgR3VhcmREaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3VhcmQoXG4gIGd1YXJkOiBHdWFyZCxcbiAgb25GYWlsdXJlUHJvZHVjZXI/OiBQcm9kdWNlckRpcmVjdGl2ZVdpdGhvdXRUcmFuc2l0aW9uXG4pOiBHdWFyZERpcmVjdGl2ZSB7XG4gIHJldHVybiB7XG4gICAgZ3VhcmQsXG4gICAgZmFpbHVyZTogb25GYWlsdXJlUHJvZHVjZXJcbiAgfTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHByb2R1Y2VyIFRoZSBwcm9kdWNlciB0byBiZSBydW5cbiAqIEBwYXJhbSB0cmFuc2l0aW9uIFRoZSB0cmFuc2l0aW9uIHRvIGJlIHJ1biBvbiBwcm9kdWNlciBwcm9jZXNzZWQgaWYgdGhlIGxvZ2ljIGluIHdoaWNoIHRoZSBwcm9kdWNlciBpcyBydW4gYWxsb3dzIGl0XG4gKiBAcmV0dXJucyBQcm9kdWNlckRpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9kdWNlcihcbiAgcHJvZHVjZXI6IFByb2R1Y2VyLFxuICB0cmFuc2l0aW9uPzogc3RyaW5nXG4pOiBQcm9kdWNlckRpcmVjdGl2ZSB8IFByb2R1Y2VyRGlyZWN0aXZlV2l0aG91dFRyYW5zaXRpb24ge1xuICByZXR1cm4ge1xuICAgIHByb2R1Y2VyLFxuICAgIHRyYW5zaXRpb25cbiAgfTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHN0YXRlIG9mIHRoZSB0cmFuc2l0aW9uXG4gKiBAcGFyYW0gZ3VhcmRzIFRoZSBndWFyZHMgb2YgdGhlIHRyYW5zaXRpb25cbiAqIEByZXR1cm5zIEltbWVkaWF0ZURpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbW1lZGlhdGUoXG4gIHRhcmdldDogc3RyaW5nLFxuICAuLi5ndWFyZHM6IEd1YXJkc0RpcmVjdGl2ZVxuKTogSW1tZWRpYXRlRGlyZWN0aXZlIHtcbiAgcmV0dXJuIHtcbiAgICBpbW1lZGlhdGU6IHRhcmdldCxcbiAgICBndWFyZHNcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmVzdGVkIGd1YXJkIGRpcmVjdGl2ZS5cbiAqIEl0IHdvcmtzIGxpa2UgdGhlIGd1YXJkIGRpcmVjdGl2ZSBidXQgaXQgcmVjZWl2ZXMgdGhlIG5lc3RlZCBtYWNoaW5lIGNvbnRleHQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IGluc3RlYWQgb2YgdGhlIHBhcmVudCBtYWNoaW5lIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG5lc3RlZCBtYWNoaW5lIHRvIGJlIHJ1blxuICogQHBhcmFtIGd1YXJkIFRoZSBndWFyZCB0byBiZSBydW5cbiAqIEBwYXJhbSBvbkZhaWx1cmVQcm9kdWNlciBUaGUgcHJvZHVjZXIgdG8gYmUgcnVuIG9uIGZhaWx1cmUsIHRoaXMgcHJvZHVjZXIgc2hvdWxkIG5vdCBoYXZlIGEgdHJhbnNpdGlvbiBuYW1lXG4gKiBAcmV0dXJucyBOZXN0ZWRHdWFyZERpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuZXN0ZWRHdWFyZChcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgZ3VhcmQ6IEd1YXJkLFxuICBvbkZhaWx1cmVQcm9kdWNlcj86IFByb2R1Y2VyRGlyZWN0aXZlV2l0aG91dFRyYW5zaXRpb25cbik6IE5lc3RlZEd1YXJkRGlyZWN0aXZlIHtcbiAgcmV0dXJuIHtcbiAgICBndWFyZCxcbiAgICBtYWNoaW5lLFxuICAgIGZhaWx1cmU6IG9uRmFpbHVyZVByb2R1Y2VyXG4gIH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBtYWNoaW5lIFRoZSBuZXN0ZWQgbWFjaGluZSB0byBiZSBydW5cbiAqIEBwYXJhbSB0cmFuc2l0aW9uIFRoZSB0cmFuc2l0aW9uIHRvIGJlIHJ1biB3aGVuIHRoZSBtYWNoaW5lIGVudGVycyBpbiB0aGUgc3RhdGUgdGhhdCBoYXMgdGhlIG5lc3RlZCBtYWNoaW5lXG4gKiBAcmV0dXJucyBOZXN0ZWRNYWNoaW5lRGlyZWN0aXZlXG4gKiBAY2F0ZWdvcnkgQ3JlYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5lc3RlZChcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgdHJhbnNpdGlvbj86IHN0cmluZ1xuKTogTmVzdGVkTWFjaGluZURpcmVjdGl2ZSB7XG4gIHJldHVybiB7XG4gICAgbWFjaGluZSxcbiAgICB0cmFuc2l0aW9uXG4gIH07XG59XG5cbi8qKlxuICogVGhpcyBpcyB1c2VkIGFzIGRvY3VtZW50YXRpb24gZm9yIHRoZSBzZXJpYWxpemF0aW9uIGFuZCBpbiB0aGUgZGlhZ3JhbSBnZW5lcmF0aW9uIG9mIHRoZSBtYWNoaW5lLlxuICogTm90IHRvIGJlIHVzZWQgaW4gdGhlIG1hY2hpbmUgZXhlY3V0aW9uIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0gZGVzY3JpcHRpb24gVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzdGF0ZVxuICogQHJldHVybnMgRGVzY3JpcHRpb25EaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZyk6IERlc2NyaXB0aW9uRGlyZWN0aXZlIHtcbiAgcmV0dXJuIHtcbiAgICBkZXNjcmlwdGlvblxuICB9O1xufVxuXG4vKipcbiAqIFN0YXRlIGRpcmVjdGl2ZSB0aGF0IHJlcHJlc2VudHMgYW4gaW5mbyBzdGF0ZS4gVGhpcyBpcyB1c2VkIGFzIGRvY3VtZW50YXRpb24gZm9yIHRoZSBzZXJpYWxpemF0aW9uIGFuZCBpbiB0aGUgZGlhZ3JhbSBnZW5lcmF0aW9uIG9mIHRoZSBtYWNoaW5lLlxuICogTm90IHRvIGJlIHVzZWQgaW4gdGhlIG1hY2hpbmUgZXhlY3V0aW9uIGl0c2VsZi5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzdGF0ZVxuICogQHBhcmFtIGFyZ3MgbmVzdGVkIG1hY2hpbmVzLCBhY3Rpb25zLCBwcm9kdWNlcnMsIHRyYW5zaXRpb25zLCBldGMuXG4gKiBAcmV0dXJucyBJbmZvU3RhdGVEaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mb1N0YXRlKFxuICBuYW1lOiBzdHJpbmcsXG4gIC4uLmFyZ3M6IFJ1bkNvbGxlY3Rpb25cbik6IEluZm9TdGF0ZURpcmVjdGl2ZSB7XG4gIGxldCBzdGF0ZU9iamVjdCA9IHN0YXRlKG5hbWUsIC4uLmFyZ3MpO1xuICBzdGF0ZU9iamVjdC50eXBlID0gXCJpbmZvXCI7XG4gIHJldHVybiBzdGF0ZU9iamVjdCBhcyBJbmZvU3RhdGVEaXJlY3RpdmU7XG59XG5cbi8qKlxuICogU3RhdGUgZGlyZWN0aXZlIHRoYXQgcmVwcmVzZW50cyBhIHByaW1hcnkgc3RhdGUuIFRoaXMgaXMgdXNlZCBhcyBkb2N1bWVudGF0aW9uIGZvciB0aGUgc2VyaWFsaXphdGlvbiBhbmQgaW4gdGhlIGRpYWdyYW0gZ2VuZXJhdGlvbiBvZiB0aGUgbWFjaGluZS5cbiAqIE5vdCB0byBiZSB1c2VkIGluIHRoZSBtYWNoaW5lIGV4ZWN1dGlvbiBpdHNlbGYuXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgc3RhdGVcbiAqIEBwYXJhbSBhcmdzIG5lc3RlZCBtYWNoaW5lcywgYWN0aW9ucywgcHJvZHVjZXJzLCB0cmFuc2l0aW9ucywgZXRjLlxuICogQHJldHVybnMgUHJpbWFyeVN0YXRlRGlyZWN0aXZlXG4gKiBAY2F0ZWdvcnkgQ3JlYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW1hcnlTdGF0ZShcbiAgbmFtZTogc3RyaW5nLFxuICAuLi5hcmdzOiBSdW5Db2xsZWN0aW9uXG4pOiBQcmltYXJ5U3RhdGVEaXJlY3RpdmUge1xuICBsZXQgc3RhdGVPYmplY3QgPSBzdGF0ZShuYW1lLCAuLi5hcmdzKTtcbiAgc3RhdGVPYmplY3QudHlwZSA9IFwicHJpbWFyeVwiO1xuICByZXR1cm4gc3RhdGVPYmplY3QgYXMgUHJpbWFyeVN0YXRlRGlyZWN0aXZlO1xufVxuXG4vKipcbiAqIFN0YXRlIGRpcmVjdGl2ZSB0aGF0IHJlcHJlc2VudHMgYSBzdWNjZXNzIHN0YXRlLiBUaGlzIGlzIHVzZWQgYXMgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIHNlcmlhbGl6YXRpb24gYW5kIGluIHRoZSBkaWFncmFtIGdlbmVyYXRpb24gb2YgdGhlIG1hY2hpbmUuXG4gKiBOb3QgdG8gYmUgdXNlZCBpbiB0aGUgbWFjaGluZSBleGVjdXRpb24gaXRzZWxmLlxuICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIHN0YXRlXG4gKiBAcGFyYW0gYXJncyBuZXN0ZWQgbWFjaGluZXMsIGFjdGlvbnMsIHByb2R1Y2VycywgdHJhbnNpdGlvbnMsIGV0Yy5cbiAqIEByZXR1cm5zIFN1Y2Nlc3NTdGF0ZURpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzU3RhdGUoXG4gIG5hbWU6IHN0cmluZyxcbiAgLi4uYXJnczogUnVuQ29sbGVjdGlvblxuKTogU3VjY2Vzc1N0YXRlRGlyZWN0aXZlIHtcbiAgbGV0IHN0YXRlT2JqZWN0ID0gc3RhdGUobmFtZSwgLi4uYXJncyk7XG4gIHN0YXRlT2JqZWN0LnR5cGUgPSBcInN1Y2Nlc3NcIjtcbiAgcmV0dXJuIHN0YXRlT2JqZWN0IGFzIFN1Y2Nlc3NTdGF0ZURpcmVjdGl2ZTtcbn1cblxuLyoqXG4gKiBTdGF0ZSBkaXJlY3RpdmUgdGhhdCByZXByZXNlbnRzIGEgd2FybmluZyBzdGF0ZS4gVGhpcyBpcyB1c2VkIGFzIGRvY3VtZW50YXRpb24gZm9yIHRoZSBzZXJpYWxpemF0aW9uIGFuZCBpbiB0aGUgZGlhZ3JhbSBnZW5lcmF0aW9uIG9mIHRoZSBtYWNoaW5lLlxuICogTm90IHRvIGJlIHVzZWQgaW4gdGhlIG1hY2hpbmUgZXhlY3V0aW9uIGl0c2VsZi5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzdGF0ZVxuICogQHBhcmFtIGFyZ3MgbmVzdGVkIG1hY2hpbmVzLCBhY3Rpb25zLCBwcm9kdWNlcnMsIHRyYW5zaXRpb25zLCBldGMuXG4gKiBAcmV0dXJucyBXYXJuaW5nU3RhdGVEaXJlY3RpdmVcbiAqIEBjYXRlZ29yeSBDcmVhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FybmluZ1N0YXRlKFxuICBuYW1lOiBzdHJpbmcsXG4gIC4uLmFyZ3M6IFJ1bkNvbGxlY3Rpb25cbik6IFdhcm5pbmdTdGF0ZURpcmVjdGl2ZSB7XG4gIGxldCBzdGF0ZU9iamVjdCA9IHN0YXRlKG5hbWUsIC4uLmFyZ3MpO1xuICBzdGF0ZU9iamVjdC50eXBlID0gXCJ3YXJuaW5nXCI7XG4gIHJldHVybiBzdGF0ZU9iamVjdCBhcyBXYXJuaW5nU3RhdGVEaXJlY3RpdmU7XG59XG5cbi8qKlxuICogU3RhdGUgZGlyZWN0aXZlIHRoYXQgcmVwcmVzZW50cyBhIGRhbmdlciBzdGF0ZS4gVGhpcyBpcyB1c2VkIGFzIGRvY3VtZW50YXRpb24gZm9yIHRoZSBzZXJpYWxpemF0aW9uIGFuZCBpbiB0aGUgZGlhZ3JhbSBnZW5lcmF0aW9uIG9mIHRoZSBtYWNoaW5lLlxuICogTm90IHRvIGJlIHVzZWQgaW4gdGhlIG1hY2hpbmUgZXhlY3V0aW9uIGl0c2VsZi5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzdGF0ZVxuICogQHBhcmFtIGFyZ3MgbmVzdGVkIG1hY2hpbmVzLCBhY3Rpb25zLCBwcm9kdWNlcnMsIHRyYW5zaXRpb25zLCBldGMuXG4gKiBAcmV0dXJucyBEYW5nZXJTdGF0ZURpcmVjdGl2ZVxuICogQGNhdGVnb3J5IENyZWF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYW5nZXJTdGF0ZShcbiAgbmFtZTogc3RyaW5nLFxuICAuLi5hcmdzOiBSdW5Db2xsZWN0aW9uXG4pOiBEYW5nZXJTdGF0ZURpcmVjdGl2ZSB7XG4gIGxldCBzdGF0ZU9iamVjdCA9IHN0YXRlKG5hbWUsIC4uLmFyZ3MpO1xuICBzdGF0ZU9iamVjdC50eXBlID0gXCJkYW5nZXJcIjtcbiAgcmV0dXJuIHN0YXRlT2JqZWN0IGFzIERhbmdlclN0YXRlRGlyZWN0aXZlO1xufVxuXG4vLyBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWFjaGluZSBvciBudWxsXG5leHBvcnQgdHlwZSBDdXJyZW50U3RhdGUgPSBzdHJpbmcgfCBudWxsO1xuXG4vLyBPYmplY3Qgd2l0aCBhbGwgdGhlIHBhcmFsbGVsIHN0YXRlcyBvZiB0aGUgbWFjaGluZVxuZXhwb3J0IGludGVyZmFjZSBBbGxTdGF0ZXMge1xuICBba2V5OiBzdHJpbmddOiBDdXJyZW50U3RhdGUgfCBBbGxTdGF0ZXM7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHN0YXRlIG9yIHRoZSBwYXJhbGxlbCBzdGF0ZXMgb2YgdGhlIG1hY2hpbmUgaWYgbm8gcGF0aCBpcyBwcm92aWRlZFxuICogT3IgZ2V0IHRoZSBjdXJyZW50IHN0YXRlIG9mIGEgbmVzdGVkIG1hY2hpbmUgaWYgYSBwYXRoIGlzIHByb3ZpZGVkXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0byBnZXQgdGhlIGN1cnJlbnQgc3RhdGUgb2ZcbiAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBjdXJyZW50IHN0YXRlLCBlLmcuICdzdGF0ZUEuc3RhdGVCLnN0YXRlQydcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHN0YXRlIG9yIG51bGwgaWYgdGhlIHBhdGggaXMgaW52YWxpZFxuICogQGNhdGVnb3J5IFN0YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0ZShcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgcGF0aD86IHN0cmluZ1xuKTogQWxsU3RhdGVzIHwgQ3VycmVudFN0YXRlIHtcbiAgLy8gSWYgdGhlcmUgaXMgbm8gbWFjaGluZSB3ZSB3aWxsIHJldHVybiBudWxsXG4gIGlmICghaXNNYWNoaW5lKG1hY2hpbmUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBJZiB0aGVyZSBpcyBubyBwYXRoIHdlIHdpbGwgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlXG4gIGlmICghaXNWYWxpZFN0cmluZyhwYXRoKSkge1xuICAgIGxldCByZXN1bHQgPSB7fSBhcyBBbGxTdGF0ZXM7XG5cbiAgICAvLyBXZSB3aWxsIGl0ZXJhdGUgb3ZlciBhbGwgdGhlIHBhcmFsbGVsIHN0YXRlc1xuICAgIGlmIChPYmplY3Qua2V5cyhtYWNoaW5lLnBhcmFsbGVsKS5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBwYXJhbGxlbE5hbWUgaW4gbWFjaGluZS5wYXJhbGxlbCkge1xuICAgICAgICByZXN1bHRbcGFyYWxsZWxOYW1lXSA9IGdldFN0YXRlKG1hY2hpbmUucGFyYWxsZWxbcGFyYWxsZWxOYW1lXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzVmFsaWRTdHJpbmcobWFjaGluZS5jdXJyZW50KSkge1xuICAgICAgcmVzdWx0LmN1cnJlbnQgPSBtYWNoaW5lLmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgc3RhdGUgYW5kIGl0IGlzIHRoZSBjdXJyZW50IHN0YXRlIHdlIHdpbGwgcmV0dXJuIGl0XG4gICAgaWYgKGlzVmFsaWRTdHJpbmcocmVzdWx0LmN1cnJlbnQpICYmIE9iamVjdC5rZXlzKHJlc3VsdCkubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gcmVzdWx0LmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIHN0YXRlIG9yIHRoZSBzdGF0ZSBpcyBub3QgdGhlIGN1cnJlbnQgc3RhdGUgd2Ugd2lsbCByZXR1cm4gdGhlIG9iamVjdFxuICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gY3VycmVudCBzdGF0ZSBhbmQgbm8gcGFyYWxsZWwgc3RhdGVzIHdlIHdpbGwgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCBwYXRoUGFydHMgPSBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgbGV0IHN0YXRlTmFtZSA9IHBhdGhQYXJ0cy5zaGlmdCgpO1xuXG4gIC8vIElmIHRoZSBzdGF0ZSBuYW1lIGlzIG5vdCBhIHN0cmluZyB3ZSB3aWxsIHJldHVybiBudWxsXG4gIGlmICghaXNWYWxpZFN0cmluZyhzdGF0ZU5hbWUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBzdGF0ZSBpbiB0aGUgcGFyYWxsZWwgc3RhdGVzXG4gIGlmIChzdGF0ZU5hbWUgaW4gbWFjaGluZS5wYXJhbGxlbCkge1xuICAgIHJldHVybiBnZXRTdGF0ZShtYWNoaW5lLnBhcmFsbGVsW3N0YXRlTmFtZV0sIHBhdGhQYXJ0cy5qb2luKFwiLlwiKSk7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBzdGF0ZSBpbiB0aGUgc3RhdGVzXG4gIGlmIChzdGF0ZU5hbWUgaW4gbWFjaGluZS5zdGF0ZXMpIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGEgc3RhdGUgd2Ugd2lsbCBmaW5kIHRoZSBzdGF0ZXMgaW4gdGhlIG5lc3RlZCBtYWNoaW5lc1xuICAgIGxldCBvYmo6IEFsbFN0YXRlcyA9IHt9O1xuXG4gICAgLy8gRmluZCBhIG5lc3RlZCBtYWNoaW5lIGluIHRoZSBzdGF0ZVxuICAgIGZvciAobGV0IG5lc3RlZCBvZiBtYWNoaW5lLnN0YXRlc1tzdGF0ZU5hbWVdLm5lc3RlZCkge1xuICAgICAgb2JqW25lc3RlZC5tYWNoaW5lLmlkXSA9IGdldFN0YXRlKG5lc3RlZC5tYWNoaW5lLCBwYXRoUGFydHMuam9pbihcIi5cIikpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBvYmplY3QgaXMgZW1wdHkgd2Ugd2lsbCByZXR1cm4gbnVsbFxuICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG9iamVjdCBvbmx5IGhhcyBvbmUgcHJvcGVydHkgd2Ugd2lsbCByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eVxuICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIG9ialtPYmplY3Qua2V5cyhvYmopWzBdXTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBhcmUgaGVyZSB3ZSB3aWxsIHJldHVybiB0aGUgd2hvbGUgb2JqZWN0XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIC8vIElmIHdlIGFyZSBoZXJlIGNoZWNrIGlmIHdlIGhhdmUgYSBtYWNoaW5lIGlkIGFzIHRoZSBzdGF0ZU5hbWVcbiAgbGV0IG5lc3RlZE1hY2hpbmVJZCA9IHN0YXRlTmFtZTtcblxuICAvLyBGaW5kIGEgbmVzdGVkIG1hY2hpbmUgaW4gdGhlIHN0YXRlXG4gIGZvciAoc3RhdGVOYW1lIGluIG1hY2hpbmUuc3RhdGVzKSB7XG4gICAgZm9yIChsZXQgbmVzdGVkIG9mIG1hY2hpbmUuc3RhdGVzW3N0YXRlTmFtZV0ubmVzdGVkKSB7XG4gICAgICBpZiAobmVzdGVkLm1hY2hpbmUuaWQgPT09IG5lc3RlZE1hY2hpbmVJZCkge1xuICAgICAgICByZXR1cm4gZ2V0U3RhdGUobmVzdGVkLm1hY2hpbmUsIHBhdGhQYXJ0cy5qb2luKFwiLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgd2UgYXJlIGhlcmUgd2Ugd2lsbCByZXR1cm4gbnVsbFxuICByZXR1cm4gbnVsbDtcbn1cbiIsIi8qKiBAbW9kdWxlIHgtcm9ib3QgKi9cbmltcG9ydCB7XG4gIEFjdGlvbkRpcmVjdGl2ZSxcbiAgSGlzdG9yeVR5cGUsXG4gIE1hY2hpbmUsXG4gIFByb2R1Y2VyRGlyZWN0aXZlLFxuICBTVEFSVF9FVkVOVCxcbiAgU3RhdGVEaXJlY3RpdmUsXG4gIFRyYW5zaXRpb25EaXJlY3RpdmVcbn0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHtcbiAgY2FuTWFrZVRyYW5zaXRpb24sXG4gIGNsb25lQ29udGV4dCxcbiAgZGVlcEZyZWV6ZSxcbiAgaGFzVHJhbnNpdGlvbixcbiAgaXNBY3Rpb24sXG4gIGlzR3VhcmQsXG4gIGlzTmVzdGVkR3VhcmQsXG4gIGlzTmVzdGVkTWFjaGluZVdpdGhUcmFuc2l0aW9uRGlyZWN0aXZlLFxuICBpc05lc3RlZFRyYW5zaXRpb24sXG4gIGlzUGFyYWxsZWxUcmFuc2l0aW9uLFxuICBpc1Byb2R1Y2VyLFxuICBpc1Byb2R1Y2VyV2l0aFRyYW5zaXRpb24sXG4gIGlzVmFsaWRPYmplY3QsXG4gIGlzVmFsaWRTdHJpbmdcbn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdGhhdCBpcyBydW5uaW5nXG4gKiBAcGFyYW0gcHJvZHVjZXIgVGhlIHByb2R1Y2VyIHRvIGludm9rZVxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gcGFzcyB0byB0aGUgcHJvZHVjZXJcbiAqIEByZXR1cm5zIFByb21pc2Ugb3Igdm9pZCBkZXBlbmRpbmcgaWYgdGhlIG1hY2hpbmUgaXMgYXN5bmMgb3Igbm90XG4gKi9cbmZ1bmN0aW9uIHJ1blByb2R1Y2VyKFxuICBtYWNoaW5lOiBNYWNoaW5lLFxuICBwcm9kdWNlcj86IFByb2R1Y2VyRGlyZWN0aXZlIHwgc3RyaW5nIHwgbnVsbCxcbiAgcGF5bG9hZD86IGFueVxuKTogUHJvbWlzZTx2b2lkPiB8IHZvaWQge1xuICAvLyBJZiBpdCBpcyBhIHByb2R1Y2VyIHRoZW4gd2UgcnVuIGl0XG4gIGlmIChpc1Byb2R1Y2VyKHByb2R1Y2VyKSkge1xuICAgIC8vIEFkZCB0aGUgcHJvZHVjZXIgdG8gdGhlIGhpc3RvcnlcbiAgICBtYWNoaW5lLmhpc3RvcnkucHVzaChgJHtIaXN0b3J5VHlwZS5Qcm9kdWNlcn06ICR7cHJvZHVjZXIucHJvZHVjZXIubmFtZX1gKTtcblxuICAgIC8vIEdldCB0aGUgY29udGV4dFxuICAgIGxldCBjb250ZXh0ID0gbWFjaGluZS5jb250ZXh0O1xuXG4gICAgLy8gSWYgdGhlIG1hY2hpbmUgaXMgZnJvemVuIHdlIG5lZWQgdG8gY2xvbmUgdGhlIGNvbnRleHRcbiAgICBpZiAobWFjaGluZS5mcm96ZW4pIHtcbiAgICAgIGNvbnRleHQgPSBjbG9uZUNvbnRleHQoY29udGV4dCk7XG4gICAgfVxuXG4gICAgLy8gUnVuIHRoZSBwcm9kdWNlclxuICAgIGxldCBuZXdDb250ZXh0ID0gcHJvZHVjZXIucHJvZHVjZXIoY29udGV4dCwgcGF5bG9hZCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgcHJvZHVjZXIgcmV0dXJuZWQgYSBjb250ZXh0IGFuZCBpZiBzbyB3ZSB1cGRhdGUgdGhlIGNvbnRleHRcbiAgICBpZiAoaXNWYWxpZE9iamVjdChuZXdDb250ZXh0KSkge1xuICAgICAgY29udGV4dCA9IG5ld0NvbnRleHQ7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBuZXcgY29udGV4dFxuICAgIG1hY2hpbmUuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICAvLyBJZiB0aGUgbWFjaGluZSBpcyBmcm96ZW4sIHdlIHdpbGwgZGVlcCBmcmVlemUgdGhlIGNvbnRleHQgYWdhaW5cbiAgICBpZiAobWFjaGluZS5mcm96ZW4pIHtcbiAgICAgIGRlZXBGcmVlemUobWFjaGluZS5jb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgcHJvZHVjZXIgaGFzIGEgdHJhbnNpdGlvbiB0aGVuIHdlIHJ1biBpdFxuICAgIGlmIChpc1Byb2R1Y2VyV2l0aFRyYW5zaXRpb24ocHJvZHVjZXIpKSB7XG4gICAgICByZXR1cm4gaW52b2tlKG1hY2hpbmUsIHByb2R1Y2VyLnRyYW5zaXRpb24pO1xuICAgIH1cblxuICAgIC8vIElmIGlzIGEgc3RyaW5nLCB3ZSBhc3N1bWUgaXQgaXMgYSB0cmFuc2l0aW9uIGluc3RlYWQgb2YgYSBwcm9kdWNlciBhbmQgd2UgcnVuIGl0XG4gIH0gZWxzZSBpZiAoaXNWYWxpZFN0cmluZyhwcm9kdWNlcikpIHtcbiAgICByZXR1cm4gaW52b2tlKG1hY2hpbmUsIHByb2R1Y2VyKTtcbiAgfVxufVxuXG4vKipcbiAqIEFjdGlvbnMgYXJlIGFsd2F5cyBhc3luYyBhbmQgdGhlIGV4aXN0ZW5jZSBvZiBhbiBhY3Rpb24gaW4gYSBtYWNoaW5lIG1lYW5zIHRoYXQgdGhlIG1hY2hpbmUgaXMgYXN5bmMgdG9vXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0aGF0IGlzIHJ1bm5pbmdcbiAqIEBwYXJhbSBhY3Rpb24gVGhlIGFjdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIGFjdGlvblxuICogQHJldHVybnMgUHJvbWlzZVxuICovXG5hc3luYyBmdW5jdGlvbiBydW5BY3Rpb24oXG4gIG1hY2hpbmU6IE1hY2hpbmUsXG4gIGFjdGlvbjogQWN0aW9uRGlyZWN0aXZlLFxuICBwYXlsb2FkPzogYW55XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gQWRkIHRoZSBhY3Rpb24gdG8gdGhlIGhpc3RvcnlcbiAgbWFjaGluZS5oaXN0b3J5LnB1c2goYCR7SGlzdG9yeVR5cGUuQWN0aW9ufTogJHthY3Rpb24uYWN0aW9uLm5hbWV9YCk7XG5cbiAgLy8gUnVuIHRoZSBhY3Rpb25cbiAgdHJ5IHtcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYWN0aW9uLmFjdGlvbihtYWNoaW5lLmNvbnRleHQsIHBheWxvYWQpO1xuICAgIGF3YWl0IHJ1blByb2R1Y2VyKG1hY2hpbmUsIGFjdGlvbi5zdWNjZXNzLCByZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChpc1Byb2R1Y2VyKGFjdGlvbi5mYWlsdXJlKSB8fCBpc1ZhbGlkU3RyaW5nKGFjdGlvbi5mYWlsdXJlKSkge1xuICAgICAgYXdhaXQgcnVuUHJvZHVjZXIobWFjaGluZSwgYWN0aW9uLmZhaWx1cmUsIGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhc0ZhdGFsRXJyb3IobWFjaGluZTogTWFjaGluZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gbWFjaGluZS5mYXRhbCBpbnN0YW5jZW9mIEVycm9yO1xufVxuXG4vKipcbiAqXG4gKiBUaGUgZXJyb3IgaGFuZGxlciBpcyBjYWxsZWQgd2hlbiBhbiBlcnJvciBpcyB0aHJvd24gaW4gYSB0cmFuc2l0aW9uXG4gKiBGaXJzdCB3ZSBjaGVjayBpZiB0aGUgY3VycmVudCBzdGF0ZSBoYXMgYW4gZXJyb3IgdHJhbnNpdGlvbiBhbmQgaWYgc28gd2UgcnVuIGl0XG4gKiBJZiB0aGUgY3VycmVudCBzdGF0ZSBkb2VzIG5vdCBoYXZlIGFuIGVycm9yIHRyYW5zaXRpb24sIHdlIGNoZWNrIGlmIHRoZSBtYWNoaW5lIGhhcyBhIGZhdGFsIHN0YXRlIGFuZCBpZiBzbyB3ZSBnbyB0byBpdFxuICogSWYgdGhlIG1hY2hpbmUgZG9lcyBub3QgaGF2ZSBhIGZhdGFsIHN0YXRlLCB3ZSByZXRocm93IHRoZSBlcnJvclxuICpcbiAqIEBwYXJhbSBtYWNoaW5lIFRoZSBtYWNoaW5lIHRoYXQgaXMgcnVubmluZ1xuICogQHBhcmFtIHN0YXRlIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtYWNoaW5lXG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgd2FzIHRocm93blxuICogQHJldHVybnMgUHJvbWlzZSBvciB2b2lkIGRlcGVuZGluZyBpZiB0aGUgbWFjaGluZSBpcyBhc3luYyBvciBub3QgYW5kIGlmIHRoZXJlIGlzIGEgZXJyb3IgdHJhbnNpdGlvbiB0byBpbnZva2VcbiAqL1xuZnVuY3Rpb24gY2F0Y2hFcnJvcihcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgc3RhdGU6IFN0YXRlRGlyZWN0aXZlLFxuICBlcnJvcjogRXJyb3Jcbik6IFByb21pc2U8dm9pZD4gfCB2b2lkIHtcbiAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhIGxvY2FsIGVycm9yIHRyYW5zaXRpb24gYW5kIGludm9rZSBpdCBpZiBzb1xuICBpZiAoaGFzVHJhbnNpdGlvbihzdGF0ZSwgXCJlcnJvclwiKSkge1xuICAgIHJldHVybiBpbnZva2UobWFjaGluZSwgXCJlcnJvclwiLCBlcnJvcik7XG4gIH1cblxuICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgZmF0YWwgc3RhdGUgYW5kIHNldCBpdCBhcyB0aGUgY3VycmVudCBzdGF0ZSBpZiBzb1xuICBpZiAoXCJmYXRhbFwiIGluIG1hY2hpbmUuc3RhdGVzKSB7XG4gICAgbWFjaGluZS5jdXJyZW50ID0gXCJmYXRhbFwiO1xuICAgIG1hY2hpbmUuZmF0YWwgPSBlcnJvciBhcyBFcnJvcjtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgZmF0YWwgc3RhdGUsIHdlIHRocm93IHRoZSBlcnJvclxuICAvLyBCdXQgd2UgYWxzbyBhc3NpZ24gdGhlIGVycm9yIHRvIHRoZSBtYWNoaW5lIHNvIHRoYXQgaXQgY2FuIGJlIGFjY2Vzc2VkXG4gIC8vIGZyb20gdGhlIG91dHNpZGVcbiAgbWFjaGluZS5mYXRhbCA9IGVycm9yIGFzIEVycm9yO1xuICB0aHJvdyBlcnJvcjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdGhhdCBpcyBydW5uaW5nXG4gKiBAcGFyYW0gc3RhdGUgVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG1hY2hpbmVcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIGFjdGlvbnMgYW5kIHByb2R1Y2Vyc1xuICogQHJldHVybnMgUHJvbWlzZSBhcyB3ZSBrbm93IHRoYXQgdGhlIG1hY2hpbmUgaXMgYXN5bmNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcnVuQWN0aW9uc0FuZFByb2R1Y2VycyhcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgc3RhdGU6IFN0YXRlRGlyZWN0aXZlLFxuICBwYXlsb2FkOiBhbnlcbik6IFByb21pc2U8dm9pZD4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnJ1bi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBpdGVtID0gc3RhdGUucnVuW2ldO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNBY3Rpb24oaXRlbSkpIHtcbiAgICAgICAgYXdhaXQgcnVuQWN0aW9uKG1hY2hpbmUsIGl0ZW0sIHBheWxvYWQpO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb2R1Y2VyKGl0ZW0pKSB7XG4gICAgICAgIGF3YWl0IHJ1blByb2R1Y2VyKG1hY2hpbmUsIGl0ZW0sIHBheWxvYWQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBjYXRjaEVycm9yKG1hY2hpbmUsIHN0YXRlLCBlcnJvciBhcyBFcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdGhhdCBpcyBydW5uaW5nXG4gKiBAcGFyYW0gc3RhdGUgVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG1hY2hpbmVcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIHByb2R1Y2Vyc1xuICogQHJldHVybnMgdm9pZCBhcyB3ZSBrbm93IHRoYXQgdGhlIG1hY2hpbmUgaXMgbm90IGFzeW5jXG4gKi9cbmZ1bmN0aW9uIHJ1blByb2R1Y2VycyhtYWNoaW5lOiBNYWNoaW5lLCBzdGF0ZTogU3RhdGVEaXJlY3RpdmUsIHBheWxvYWQ6IGFueSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnJ1bi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBpdGVtID0gc3RhdGUucnVuW2ldO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaXNQcm9kdWNlcihpdGVtKSkge1xuICAgICAgICBydW5Qcm9kdWNlcihtYWNoaW5lLCBpdGVtLCBwYXlsb2FkKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY2F0Y2hFcnJvcihtYWNoaW5lLCBzdGF0ZSwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBtYWNoaW5lIFRoZSBtYWNoaW5lIHRoYXQgaXMgcnVubmluZ1xuICogQHBhcmFtIHN0YXRlIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtYWNoaW5lXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiBUaGUgdHJhbnNpdGlvbiB0aGF0IGlzIGJlaW5nIGludm9rZWRcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIGd1YXJkc1xuICogQHBhcmFtIGluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBndWFyZCBpbiB0aGUgdHJhbnNpdGlvblxuICogQHJldHVybnMgYm9vbGVhblxuICovXG5mdW5jdGlvbiBydW5HdWFyZHMoXG4gIG1hY2hpbmU6IE1hY2hpbmUsXG4gIHN0YXRlOiBTdGF0ZURpcmVjdGl2ZSxcbiAgdHJhbnNpdGlvbjogVHJhbnNpdGlvbkRpcmVjdGl2ZSxcbiAgcGF5bG9hZDogYW55XG4pOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2l0aW9uLmd1YXJkcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIFJ1biB0aGUgZ3VhcmRcbiAgICBsZXQgZ3VhcmQgPSB0cmFuc2l0aW9uLmd1YXJkc1tpXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBJZiB0aGUgaXRlbSBpcyBub3QgYSBndWFyZCB0aGVuIHJldHVybiBmYWxzZVxuICAgICAgLy8gPyBTaG91bGQgd2UgdGhyb3cgYW4gZXJyb3IgaW5zdGVhZD9cbiAgICAgIGlmICghaXNHdWFyZChndWFyZCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIGd1YXJkIHRvIHRoZSBoaXN0b3J5XG4gICAgICBtYWNoaW5lLmhpc3RvcnkucHVzaChgJHtIaXN0b3J5VHlwZS5HdWFyZH06ICR7Z3VhcmQuZ3VhcmQubmFtZX1gKTtcblxuICAgICAgLy8gUmVzdWx0IGNvdWxkIGJlIGEgYm9vbGVhbiBvciBhbnl0aGluZyBlbHNlXG4gICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAvLyBJZiB0aGUgZ3VhcmQgaXMgYSBuZXN0ZWQgZ3VhcmQgcnVuIGl0IHdpdGggdGhlIG5lc3RlZCBtYWNoaW5lIGNvbnRleHRcbiAgICAgIGlmIChpc05lc3RlZEd1YXJkKGd1YXJkKSkge1xuICAgICAgICByZXN1bHQgPSBndWFyZC5ndWFyZChndWFyZC5tYWNoaW5lLmNvbnRleHQsIHBheWxvYWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gZ3VhcmQuZ3VhcmQobWFjaGluZS5jb250ZXh0LCBwYXlsb2FkKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHJlc3VsdCBpcyBkaWZmZXJlbnQgdGhhbiB0cnVlIHdlIGJyZWFrIHRoZSBsb29wIGFuZCByZXR1cm4gZmFsc2VcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlc3VsdCBpcyBvdGhlciB0aGFuIHRydWUsIHdlIGNhbiByZXR1cm4gZmFsc2UgYW5kIGNoZWNrIGlmIHdlIGhhdmUgYSBmYWlsdXJlIHByb2R1Y2VyIGFuZCBpbnZva2UgaXQgaWYgc29cbiAgICAgICAgLy8gcGFzc2luZyB0aGUgcmVzdWx0IGFzIHRoZSBwYXlsb2FkIChUaGlzIGlzIHVzZWZ1bCBmb3IgZXJyb3IgaGFuZGxpbmcpXG4gICAgICAgIGlmIChpc1Byb2R1Y2VyKGd1YXJkLmZhaWx1cmUpKSB7XG4gICAgICAgICAgcnVuUHJvZHVjZXIobWFjaGluZSwgZ3VhcmQuZmFpbHVyZSwgcmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gQ2F0Y2ggdGhlIGVycm9yIGFuZCBpbnZva2UgdGhlIGVycm9yIHRyYW5zaXRpb24gaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGNhdGNoRXJyb3IobWFjaGluZSwgc3RhdGUsIGVycm9yIGFzIEVycm9yKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlIGdldCBoZXJlLCB3ZSBoYXZlIGEgc3VjY2VzcyBhbmQgd2UgY2FuIHJldHVybiB0cnVlXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0aGF0IGlzIHJ1bm5pbmdcbiAqIEBwYXJhbSBzdGF0ZSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWFjaGluZVxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gcGFzcyB0byB0aGUgYWN0aW9ucyBhbmQgcHJvZHVjZXJzIG9mIHRoZSBuZXN0ZWQgbWFjaGluZVxuICogQHJldHVybnMgUHJvbWlzZSBvciB2b2lkIGRlcGVuZGluZyBpZiB0aGUgbWFjaGluZSBpcyBhc3luYyBvciBub3RcbiAqL1xuZnVuY3Rpb24gcnVuTmVzdGVkTWFjaGluZXMoXG4gIG1hY2hpbmU6IE1hY2hpbmUsXG4gIHN0YXRlOiBTdGF0ZURpcmVjdGl2ZSxcbiAgcGF5bG9hZDogYW55XG4pOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7XG4gIC8vIElmIHRoZXJlIGFyZSBubyBuZXN0ZWQgbWFjaGluZXMsIHdlIGNhbiByZXR1cm5cbiAgaWYgKHN0YXRlLm5lc3RlZC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcHJvbWlzZTtcbiAgaWYgKG1hY2hpbmUuaXNBc3luYykge1xuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8vIElmIHRoZSBzdGF0ZSBoYXMgYSBuZXN0ZWQgbWFjaGluZSwgd2UgcnVuIGl0XG4gIGZvciAobGV0IG5lc3RlZE1hY2hpbmUgb2Ygc3RhdGUubmVzdGVkKSB7XG4gICAgLy8gSWYgdGhlIG5lc3RlZCBtYWNoaW5lIGlzIGEgbmVzdGVkIG1hY2hpbmUgd2l0aCBhIHRyYW5zaXRpb24gd2UgcnVuIHRoZSB0cmFuc2l0aW9uIG9uIGl0XG4gICAgaWYgKGlzTmVzdGVkTWFjaGluZVdpdGhUcmFuc2l0aW9uRGlyZWN0aXZlKG5lc3RlZE1hY2hpbmUpKSB7XG4gICAgICBsZXQgdHJhbnNpdGlvbiA9IG5lc3RlZE1hY2hpbmUudHJhbnNpdGlvbjtcbiAgICAgIGlmIChwcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT5cbiAgICAgICAgICBpbnZva2UobmVzdGVkTWFjaGluZS5tYWNoaW5lLCB0cmFuc2l0aW9uLCBwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52b2tlKG5lc3RlZE1hY2hpbmUubWFjaGluZSwgdHJhbnNpdGlvbiwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBwcm9taXNlXG4gIHJldHVybiBwcm9taXNlIHx8IHZvaWQgMDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdGhhdCBpcyBydW5uaW5nXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiBUaGUgdHJhbnNpdGlvbiB0aGF0IGlzIGJlaW5nIGludm9rZWRcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIGFjdGlvbnMgYW5kIHByb2R1Y2VycyBvZiB0aGUgbmVzdGVkIG1hY2hpbmVcbiAqIEByZXR1cm5zIFByb21pc2Ugb3Igdm9pZCBkZXBlbmRpbmcgaWYgdGhlIG1hY2hpbmUgaXMgYXN5bmMgb3Igbm90XG4gKi9cbmZ1bmN0aW9uIHJ1bk5lc3RlZFRyYW5zaXRpb24oXG4gIG1hY2hpbmU6IE1hY2hpbmUsXG4gIHRyYW5zaXRpb246IHN0cmluZyxcbiAgcGF5bG9hZDogYW55XG4pOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7XG4gIC8vIFdlIGtub3cgdGhhdCB3ZSBoYXZlIGEgbmVzdGVkIHRyYW5zaXRpb24gYW5kIHRoYXQgdGhlIGZpcnN0IHBhcnQgaXMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgLy8gc28gd2UgZ2V0IHJpZCBvZiB0aGUgZmlyc3QgcGFydCBhbmQgc3BsaXQgdGhlIHJlc3RcbiAgbGV0IG5lc3RlZFRyYW5zaXRpb25QYXJ0cyA9IHRyYW5zaXRpb24uc3BsaXQoXCIuXCIpO1xuICBsZXQgc3RhdGVOYW1lID0gbmVzdGVkVHJhbnNpdGlvblBhcnRzLnNoaWZ0KCk7XG4gIGxldCBuZXN0ZWRUcmFuc2l0aW9uID0gbmVzdGVkVHJhbnNpdGlvblBhcnRzLmpvaW4oXCIuXCIpO1xuICBsZXQgcHJvbWlzZSA9IG1hY2hpbmUuaXNBc3luYyA/IFByb21pc2UucmVzb2x2ZSgpIDogbnVsbDtcblxuICAvLyBJZiB3ZSBoYXZlIG5vIHN0YXRlTmFtZSwgd2UgY2FuJ3QgbWFrZSBhIHRyYW5zaXRpb25cbiAgaWYgKCFzdGF0ZU5hbWUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgY3VycmVudFN0YXRlT2JqZWN0ID0gbWFjaGluZS5zdGF0ZXNbbWFjaGluZS5jdXJyZW50XTtcblxuICAvLyBXZSBsb29wIHRocm91Z2ggdGhlIG5lc3RlZCBtYWNoaW5lcyBhbmQgaW52b2tlIHRoZSB0cmFuc2l0aW9uIGlmIHdlIGNhblxuICBmb3IgKGxldCBuZXN0ZWRNYWNoaW5lRGlyZWN0aXZlIG9mIGN1cnJlbnRTdGF0ZU9iamVjdC5uZXN0ZWQpIHtcbiAgICBsZXQgbmVzdGVkTWFjaGluZSA9IG5lc3RlZE1hY2hpbmVEaXJlY3RpdmUubWFjaGluZTtcbiAgICBsZXQgY3VycmVudE5lc3RlZFN0YXRlID0gbmVzdGVkTWFjaGluZS5zdGF0ZXNbbmVzdGVkTWFjaGluZS5jdXJyZW50XTtcbiAgICBpZiAoXG4gICAgICBjYW5NYWtlVHJhbnNpdGlvbihuZXN0ZWRNYWNoaW5lLCBjdXJyZW50TmVzdGVkU3RhdGUsIG5lc3RlZFRyYW5zaXRpb24pXG4gICAgKSB7XG4gICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+XG4gICAgICAgICAgaW52b2tlKG5lc3RlZE1hY2hpbmUsIG5lc3RlZFRyYW5zaXRpb24sIHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZva2UobmVzdGVkTWFjaGluZSwgbmVzdGVkVHJhbnNpdGlvbiwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgd2UgaGF2ZSBhbiBpbW1lZGlhdGUgdHJhbnNpdGlvbnMgd2UgY2FuIHJ1biBpdFxuICBpZiAocHJvbWlzZSkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT5cbiAgICAgIGludm9rZUltbWVkaWF0ZURpcmVjdGl2ZXMobWFjaGluZSwgY3VycmVudFN0YXRlT2JqZWN0LCBwYXlsb2FkKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaW52b2tlSW1tZWRpYXRlRGlyZWN0aXZlcyhtYWNoaW5lLCBjdXJyZW50U3RhdGVPYmplY3QsIHBheWxvYWQpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2UgfHwgdm9pZCAwO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0aGF0IGlzIHJ1bm5pbmdcbiAqIEBwYXJhbSB0cmFuc2l0aW9uIFRoZSB0cmFuc2l0aW9uIHRoYXQgaXMgYmVpbmcgaW52b2tlZFxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gcGFzcyB0byB0aGUgYWN0aW9ucyBhbmQgcHJvZHVjZXJzIG9mIHRoZSBwYXJhbGxlbCBtYWNoaW5lXG4gKiBAcmV0dXJucyBQcm9taXNlIG9yIHZvaWQgZGVwZW5kaW5nIGlmIHRoZSBtYWNoaW5lIGlzIGFzeW5jIG9yIG5vdFxuICovXG5mdW5jdGlvbiBydW5QYXJhbGxlbFRyYW5zaXRpb24oXG4gIG1hY2hpbmU6IE1hY2hpbmUsXG4gIHRyYW5zaXRpb246IHN0cmluZyxcbiAgcGF5bG9hZDogYW55XG4pOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7XG4gIC8vIFdlIGtub3cgdGhhdCB3ZSBoYXZlIGEgcGFyYWxsZWwgdHJhbnNpdGlvbiBhbmQgdGhhdCB0aGUgZmlyc3QgcGFydCBpcyB0aGUgcGFyYWxsZWxNYWNoaW5lSWRcbiAgLy8gc28gd2UgZ2V0IHJpZCBvZiB0aGUgZmlyc3QgcGFydCBhbmQgc3BsaXQgdGhlIHJlc3RcbiAgbGV0IHBhcmFsbGVsVHJhbnNpdGlvblBhcnRzID0gdHJhbnNpdGlvbi5zcGxpdChcIi9cIik7XG4gIGxldCBwYXJhbGxlbE1hY2hpbmVJZCA9IHBhcmFsbGVsVHJhbnNpdGlvblBhcnRzLnNoaWZ0KCk7XG4gIGxldCBwYXJhbGxlbFRyYW5zaXRpb24gPSBwYXJhbGxlbFRyYW5zaXRpb25QYXJ0cy5qb2luKFwiL1wiKTtcblxuICAvLyBJZiB3ZSBoYXZlIG5vIHN0YXRlTmFtZSwgd2UgY2FuJ3QgbWFrZSBhIHRyYW5zaXRpb25cbiAgaWYgKCFwYXJhbGxlbE1hY2hpbmVJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0cmFuc2l0aW9uICR7dHJhbnNpdGlvbn1gKTtcbiAgfVxuXG4gIC8vIElmIHRoZXJlIGlzIG5vIHBhcmFsbGVsIG1hY2hpbmUgd2l0aCB0aGUgZ2l2ZW4gaWQsIHdlIGNhbid0IG1ha2UgYSB0cmFuc2l0aW9uXG4gIGxldCBwYXJhbGxlbE1hY2hpbmUgPSBtYWNoaW5lLnBhcmFsbGVsW3BhcmFsbGVsTWFjaGluZUlkXTtcbiAgaWYgKCFwYXJhbGxlbE1hY2hpbmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHJhbnNpdGlvbiAke3RyYW5zaXRpb259YCk7XG4gIH1cblxuICAvLyBJZiB0aGUgcGFyYWxsZWxNYWNoaW5lSWQgaXMgaW4gdGhlIHBhcmFsbGVsIG9iamVjdCB0cnkgdG8gcnVuIHRoZSB0cmFuc2l0aW9uIGluIHRoZSBwYXJhbGxlbCBtYWNoaW5lXG4gIHJldHVybiBpbnZva2UocGFyYWxsZWxNYWNoaW5lLCBwYXJhbGxlbFRyYW5zaXRpb24sIHBheWxvYWQpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdGhhdCBpcyBydW5uaW5nXG4gKiBAcGFyYW0gc3RhdGUgVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG1hY2hpbmVcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIGFjdGlvbnMgYW5kIHByb2R1Y2VycyBvZiB0aGUgdHJhbnNpdGlvblxuICogQHJldHVybnMgUHJvbWlzZSBvciB2b2lkIGRlcGVuZGluZyBpZiB0aGUgbWFjaGluZSBpcyBhc3luYyBvciBub3RcbiAqL1xuZnVuY3Rpb24gaW52b2tlSW1tZWRpYXRlRGlyZWN0aXZlcyhcbiAgbWFjaGluZTogTWFjaGluZSxcbiAgc3RhdGU6IFN0YXRlRGlyZWN0aXZlLFxuICBwYXlsb2FkOiBhbnlcbik6IFByb21pc2U8dm9pZD4gfCB2b2lkIHtcbiAgLy8gSWYgdGhlcmUgYXJlIG5vIGltbWVkaWF0ZSBkaXJlY3RpdmVzLCB3ZSBjYW4gcmV0dXJuXG4gIGlmIChzdGF0ZS5pbW1lZGlhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGltbWVkaWF0ZSA9IHN0YXRlLmltbWVkaWF0ZTtcbiAgbGV0IHByb21pc2UgPSBtYWNoaW5lLmlzQXN5bmMgPyBQcm9taXNlLnJlc29sdmUoKSA6IG51bGw7XG5cbiAgLy8gRm9yIGVhY2ggaW1tZWRpYXRlIGRpcmVjdGl2ZVxuICBmb3IgKGxldCBpbW1lZGlhdGVEaXJlY3RpdmUgb2YgaW1tZWRpYXRlKSB7XG4gICAgaWYgKGhhc0ZhdGFsRXJyb3IobWFjaGluZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBpcyBhIHBhcmFsbGVsIHRyYW5zaXRpb24gd2UgcnVuIHRoZSB0cmFuc2l0aW9uIGluIHRoZSBwYXJhbGxlbCBtYWNoaW5lXG4gICAgaWYgKGlzUGFyYWxsZWxUcmFuc2l0aW9uKGltbWVkaWF0ZURpcmVjdGl2ZS5pbW1lZGlhdGUpKSB7XG4gICAgICBsZXQgdHJhbnNpdGlvblBhcnRzID0gaW1tZWRpYXRlRGlyZWN0aXZlLmltbWVkaWF0ZS5zcGxpdChcIi9cIik7XG4gICAgICBsZXQgcGFyYWxsZWxNYWNoaW5lSWQgPSB0cmFuc2l0aW9uUGFydHMuc2hpZnQoKSBhcyBzdHJpbmc7XG4gICAgICBsZXQgcGFyYWxsZWxUcmFuc2l0aW9uID0gdHJhbnNpdGlvblBhcnRzLmpvaW4oXCIvXCIpO1xuICAgICAgbGV0IHBhcmFsbGVsTWFjaGluZSA9IG1hY2hpbmUucGFyYWxsZWxbcGFyYWxsZWxNYWNoaW5lSWRdO1xuICAgICAgaWYgKHByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PlxuICAgICAgICAgIGludm9rZShwYXJhbGxlbE1hY2hpbmUsIHBhcmFsbGVsVHJhbnNpdGlvbiwgcGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludm9rZShwYXJhbGxlbE1hY2hpbmUsIHBhcmFsbGVsVHJhbnNpdGlvbiwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgaXMgYSBuZXN0ZWQgdHJhbnNpdGlvbiB3ZSBydW4gdGhlIHRyYW5zaXRpb24gaW4gdGhlIG5lc3RlZCBtYWNoaW5lXG4gICAgZWxzZSBpZiAoaXNOZXN0ZWRUcmFuc2l0aW9uKGltbWVkaWF0ZURpcmVjdGl2ZS5pbW1lZGlhdGUpKSB7XG4gICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+XG4gICAgICAgICAgaW52b2tlKG1hY2hpbmUsIGltbWVkaWF0ZURpcmVjdGl2ZS5pbW1lZGlhdGUsIHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZva2UobWFjaGluZSwgaW1tZWRpYXRlRGlyZWN0aXZlLmltbWVkaWF0ZSwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgaXMgYSB0cmFuc2l0aW9uIHdlIHJ1biB0aGUgdHJhbnNpdGlvblxuICAgIGVsc2Uge1xuICAgICAgaWYgKHByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gT25seSBydW4gdGhlIG5leHQgaW1tZWRpYXRlIGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIGVxdWFsIHRvIHRoZSBzdGF0ZSB3ZSBhcmUgaW4gbm93XG4gICAgICAgICAgaWYgKG1hY2hpbmUuY3VycmVudCA9PT0gc3RhdGUubmFtZSkge1xuICAgICAgICAgICAgYXdhaXQgaW52b2tlKG1hY2hpbmUsIGltbWVkaWF0ZURpcmVjdGl2ZS5pbW1lZGlhdGUsIHBheWxvYWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPbmx5IHJ1biB0aGUgbmV4dCBpbW1lZGlhdGUgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgZXF1YWwgdG8gdGhlIHN0YXRlIHdlIGFyZSBpbiBub3dcbiAgICAgICAgaWYgKG1hY2hpbmUuY3VycmVudCA9PT0gc3RhdGUubmFtZSkge1xuICAgICAgICAgIGludm9rZShtYWNoaW5lLCBpbW1lZGlhdGVEaXJlY3RpdmUuaW1tZWRpYXRlLCBwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwcm9taXNlIHx8IHZvaWQgMDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIG1hY2hpbmUgVGhlIG1hY2hpbmUgdG8gaW52b2tlIHRoZSB0cmFuc2l0aW9uIG9uXG4gKiBAcGFyYW0gdHJhbnNpdGlvbiBUaGUgdHJhbnNpdGlvbiB0byBpbnZva2VcbiAqIEBwYXJhbSBwYXlsb2FkIFRoZSBvcHRpb25hbCBwYXlsb2FkIHRvIHBhc3MgdG8gdGhlIHRyYW5zaXRpb25cbiAqIEByZXR1cm5zIFZvaWQgb3IgYSBwcm9taXNlIGlmIHRoZSBtYWNoaW5lIGlzIGFzeW5jXG4gKiBAY2F0ZWdvcnkgSW52b2NhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52b2tlKFxuICBtYWNoaW5lOiBNYWNoaW5lLFxuICB0cmFuc2l0aW9uOiBzdHJpbmcsXG4gIHBheWxvYWQ/OiBhbnlcbik6IFByb21pc2U8dm9pZD4gfCB2b2lkIHtcbiAgLy8gSWYgdGhlIG1hY2hpbmUgaGFzIGEgZmF0YWwgZXJyb3IsIHdlIHdpbGwgcmV0dXJuIGltbWVkaWF0ZWx5XG4gIGlmIChoYXNGYXRhbEVycm9yKG1hY2hpbmUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWNlaXZlZCBhIHZhbGlkIHRyYW5zaXRpb24gYXMgc3RyaW5nIGFuZCB0aHJvdyBhbiBlcnJvciBpZiBub3RcbiAgaWYgKGlzVmFsaWRTdHJpbmcodHJhbnNpdGlvbikgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRyeWluZyB0byBpbnZva2UgYSB0cmFuc2l0aW9uIHdpdGggYW4gaW52YWxpZCBzdHJpbmc6ICR7dHJhbnNpdGlvbn1gXG4gICAgKTtcbiAgfVxuXG4gIGxldCB0cmltbWVkVHJhbnNpdGlvbiA9IHRyYW5zaXRpb24udHJpbSgpO1xuXG4gIC8vIElmIHRoZSB0cmFuc2l0aW9uIGVxdWFscyBTVEFSVF9FVkVOVCwgd2UgZ2V0IHRoZSBpbml0aWFsIHN0YXRlXG4gIGlmICh0cmltbWVkVHJhbnNpdGlvbiA9PT0gU1RBUlRfRVZFTlQpIHtcbiAgICB0cmFuc2l0aW9uID0gbWFjaGluZS5pbml0aWFsO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IHN0YXRlIG9iamVjdFxuICBsZXQgY3VycmVudFN0YXRlT2JqZWN0ID0gbWFjaGluZS5zdGF0ZXNbbWFjaGluZS5jdXJyZW50XTtcblxuICBsZXQgaGFzVHJhbnNpdGlvbiA9IGNhbk1ha2VUcmFuc2l0aW9uKFxuICAgIG1hY2hpbmUsXG4gICAgY3VycmVudFN0YXRlT2JqZWN0LFxuICAgIHRyaW1tZWRUcmFuc2l0aW9uXG4gICk7XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIHRyYW5zaXRpb24gZXhpc3RzIGluIHRoZSBjdXJyZW50IHN0YXRlIGFuZCB0aHJvdyBhbiBlcnJvciBpZiBub3RcbiAgaWYgKCFoYXNUcmFuc2l0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFRoZSB0cmFuc2l0aW9uICcke3RyaW1tZWRUcmFuc2l0aW9ufScgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGN1cnJlbnQgc3RhdGUgJyR7bWFjaGluZS5jdXJyZW50fSdgXG4gICAgKTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHdlIGhhdmUgYSBuZXN0ZWQgb3IgcGFyYWxsZWwgdHJhbnNpdGlvblxuICBpZiAoaXNQYXJhbGxlbFRyYW5zaXRpb24odHJpbW1lZFRyYW5zaXRpb24pKSB7XG4gICAgcmV0dXJuIHJ1blBhcmFsbGVsVHJhbnNpdGlvbihtYWNoaW5lLCB0cmltbWVkVHJhbnNpdGlvbiwgcGF5bG9hZCk7XG4gIH1cblxuICBpZiAoaXNOZXN0ZWRUcmFuc2l0aW9uKHRyaW1tZWRUcmFuc2l0aW9uKSkge1xuICAgIHJldHVybiBydW5OZXN0ZWRUcmFuc2l0aW9uKG1hY2hpbmUsIHRyaW1tZWRUcmFuc2l0aW9uLCBwYXlsb2FkKTtcbiAgfVxuXG4gIC8vIE9ubHkgcnVuIGd1YXJkcyBpZiB0aGUgdHJhbnNpdGlvbiBpcyBub3QgdGhlIFNUQVJUX0VWRU5UXG4gIGlmICh0cmltbWVkVHJhbnNpdGlvbiAhPT0gU1RBUlRfRVZFTlQpIHtcbiAgICAvLyBBZGQgdGhlIHRyYW5zaXRpb24gdG8gdGhlIGhpc3RvcnlcbiAgICBtYWNoaW5lLmhpc3RvcnkucHVzaChgJHtIaXN0b3J5VHlwZS5UcmFuc2l0aW9ufTogJHt0cmltbWVkVHJhbnNpdGlvbn1gKTtcblxuICAgIC8vIEdldCB0aGUgdHJhbnNpdGlvbiBvYmplY3RcbiAgICBsZXQgdHJhbnNpdGlvbk9iamVjdCA9IGN1cnJlbnRTdGF0ZU9iamVjdC5vblt0cmltbWVkVHJhbnNpdGlvbl07XG5cbiAgICAvLyBJZiB0aGUgdHJhbnNpdGlvbiBoYXMgZ3VhcmRzLCBydW4gdGhlbSBhbmQgZGVjaWRlIGlmIHdlIHNob3VsZCBjb250aW51ZVxuICAgIGxldCBzaG91bGRDb250aW51ZSA9IHJ1bkd1YXJkcyhcbiAgICAgIG1hY2hpbmUsXG4gICAgICBjdXJyZW50U3RhdGVPYmplY3QsXG4gICAgICB0cmFuc2l0aW9uT2JqZWN0LFxuICAgICAgcGF5bG9hZFxuICAgICk7XG4gICAgaWYgKHNob3VsZENvbnRpbnVlID09PSBmYWxzZSkge1xuICAgICAgLy8gQXMgd2UgdHJpZWQgdG8gbWFrZSBhIHRyYW5zaXRpb24sIHdlIG5lZWQgdG8gYWRkIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBoaXN0b3J5XG4gICAgICBtYWNoaW5lLmhpc3RvcnkucHVzaChgJHtIaXN0b3J5VHlwZS5TdGF0ZX06ICR7Y3VycmVudFN0YXRlT2JqZWN0Lm5hbWV9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHRoZSB0YXJnZXQgc3RhdGVcbiAgbGV0IHRhcmdldFN0YXRlID1cbiAgICB0cmltbWVkVHJhbnNpdGlvbiA9PT0gU1RBUlRfRVZFTlRcbiAgICAgID8gbWFjaGluZS5pbml0aWFsXG4gICAgICA6IGN1cnJlbnRTdGF0ZU9iamVjdC5vblt0cmltbWVkVHJhbnNpdGlvbl0udGFyZ2V0O1xuXG4gIC8vIENoZWNrIGlmIHdlIGhhdmUgYSB2YWxpZCB0YXJnZXQgc3RhdGUgYXMgc3RyaW5nIGFuZCB0aHJvdyBhbiBlcnJvciBpZiBub3RcbiAgaWYgKGlzVmFsaWRTdHJpbmcodGFyZ2V0U3RhdGUpID09PSBmYWxzZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUcnlpbmcgdG8gaW52b2tlIGEgdHJhbnNpdGlvbiB3aXRoIGFuIGludmFsaWQgdGFyZ2V0IHN0YXRlOiAke3RhcmdldFN0YXRlfWBcbiAgICApO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldCBzdGF0ZSBleGlzdHMgaW4gdGhlIG1hY2hpbmUgYW5kIHRocm93IGFuIGVycm9yIGlmIG5vdFxuICBpZiAodGFyZ2V0U3RhdGUgaW4gbWFjaGluZS5zdGF0ZXMgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgdGFyZ2V0IHN0YXRlICcke3RhcmdldFN0YXRlfScgZm9yICcke21hY2hpbmUuY3VycmVudH0uJHt0cmltbWVkVHJhbnNpdGlvbn0nIHRyYW5zaXRpb25gXG4gICAgKTtcbiAgfVxuXG4gIC8vIEdldCB0aGUgdGFyZ2V0IHN0YXRlXG4gIGxldCB0YXJnZXRTdGF0ZU9iamVjdCA9IG1hY2hpbmUuc3RhdGVzW3RhcmdldFN0YXRlXTtcblxuICAvLyBPbmx5IGNoYW5nZSB0aGUgY3VycmVudCBzdGF0ZSBpZiB0aGUgdHJhbnNpdGlvbiBpcyBub3QgU1RBUlRfRVZFTlRcbiAgaWYgKHRyaW1tZWRUcmFuc2l0aW9uICE9PSBTVEFSVF9FVkVOVCkge1xuICAgIC8vIFNldCB0aGUgY3VycmVudCBzdGF0ZVxuICAgIG1hY2hpbmUuY3VycmVudCA9IHRhcmdldFN0YXRlO1xuICAgIG1hY2hpbmUuaGlzdG9yeS5wdXNoKGAke0hpc3RvcnlUeXBlLlN0YXRlfTogJHt0YXJnZXRTdGF0ZX1gKTtcbiAgfVxuXG4gIGlmIChtYWNoaW5lLmlzQXN5bmMpIHtcbiAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgLy8gVHJ5IHRvIHJ1biBuZXN0ZWQgbWFjaGluZXMgaWYgYW55XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PlxuICAgICAgcnVuTmVzdGVkTWFjaGluZXMobWFjaGluZSwgdGFyZ2V0U3RhdGVPYmplY3QsIHBheWxvYWQpXG4gICAgKTtcblxuICAgIC8vIFJ1biB0aGUgYWN0aW9ucyBhbmQgcHJvZHVjZXJzXG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PlxuICAgICAgcnVuQWN0aW9uc0FuZFByb2R1Y2VycyhtYWNoaW5lLCB0YXJnZXRTdGF0ZU9iamVjdCwgcGF5bG9hZClcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIGltbWVkaWF0ZSBkaXJlY3RpdmVzLCBydW4gdGhlbVxuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oKCkgPT5cbiAgICAgIGludm9rZUltbWVkaWF0ZURpcmVjdGl2ZXMobWFjaGluZSwgdGFyZ2V0U3RhdGVPYmplY3QsIHBheWxvYWQpXG4gICAgKTtcblxuICAgIC8vIFJldHVybiB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLy8gVHJ5IHRvIHJ1biBuZXN0ZWQgbWFjaGluZXMgaWYgYW55XG4gIHJ1bk5lc3RlZE1hY2hpbmVzKG1hY2hpbmUsIHRhcmdldFN0YXRlT2JqZWN0LCBwYXlsb2FkKTtcblxuICAvLyBSdW4gdGhlIGFjdGlvbnMgb3IgcHJvZHVjZXJzIG9mIHRoZSB0YXJnZXQgc3RhdGVcbiAgcnVuUHJvZHVjZXJzKG1hY2hpbmUsIHRhcmdldFN0YXRlT2JqZWN0LCBwYXlsb2FkKTtcblxuICAvLyBJZiB0aGVyZSBhcmUgaW1tZWRpYXRlIGRpcmVjdGl2ZXMsIHJ1biB0aGVtXG4gIGludm9rZUltbWVkaWF0ZURpcmVjdGl2ZXMobWFjaGluZSwgdGFyZ2V0U3RhdGVPYmplY3QsIHBheWxvYWQpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbWFjaGluZSBUaGUgbWFjaGluZSB0byBydW4gdGhlIGluaXRpYWwgc3RhdGUgYXJndW1lbnRzXG4gKiBAcGFyYW0gcGF5bG9hZCBUaGUgb3B0aW9uYWwgcGF5bG9hZCB0byBwYXNzIHRvIHRoZSBpbml0aWFsIHN0YXRlXG4gKiBAcmV0dXJucyBWb2lkIG9yIGEgcHJvbWlzZSBpZiB0aGUgbWFjaGluZSBpcyBhc3luY1xuICogQGNhdGVnb3J5IEludm9jYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0KG1hY2hpbmU6IE1hY2hpbmUsIHBheWxvYWQ/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7XG4gIC8vIFZhbGlkYXRlIGluaXRpYWwgdHJhbnNpdGlvbiBiZWZvcmUgaW52b2tpbmdcbiAgbGV0IGNhblN0YXJ0TWFjaGluZSA9IGNhbk1ha2VUcmFuc2l0aW9uKFxuICAgIG1hY2hpbmUsXG4gICAgbWFjaGluZS5zdGF0ZXNbbWFjaGluZS5jdXJyZW50XSxcbiAgICBTVEFSVF9FVkVOVFxuICApO1xuICAvLyBJZiB3ZSBjYW4ndCBzdGFydCB0aGUgbWFjaGluZSwgdGhyb3cgYW4gZXJyb3JcbiAgaWYgKCFjYW5TdGFydE1hY2hpbmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBtYWNoaW5lIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZC5gKTtcbiAgfVxuXG4gIHJldHVybiBpbnZva2UobWFjaGluZSwgU1RBUlRfRVZFTlQsIHBheWxvYWQpO1xufVxuIl0sIm1hcHBpbmdzIjoiZ0pBQUFBLEVBQUEsRyx5REFBQUMsQ0FBQUQsRUFBQSxDQUFBRSxPQUFBLElBQUFBLEVBQUFDLFFBQUEsSUFBQUEsRUFBQUMsWUFBQSxJQUFBQSxFQUFBQyxZQUFBLElBQUFBLEVBQUFDLFNBQUEsSUFBQUEsRUFBQUMsTUFBQSxJQUFBQSxFQUFBQyxVQUFBLElBQUFBLEVBQUFDLFVBQUEsSUFBQUEsRUFBQUMsUUFBQSxJQUFBQSxFQUFBQyxPQUFBLElBQUFBLEdBQUFDLFFBQUEsSUFBQUEsRUFBQUMsT0FBQSxJQUFBQSxFQUFBQyxZQUFBLElBQUFBLEVBQUFDLFNBQUEsSUFBQUEsRUFBQUMsYUFBQSxJQUFBQSxFQUFBQyxTQUFBLElBQUFBLEVBQUFDLE1BQUEsSUFBQUEsR0FBQUMsTUFBQSxJQUFBQSxFQUFBQyxPQUFBLElBQUFBLEVBQUFDLGFBQUEsSUFBQUEsRUFBQUMsV0FBQSxJQUFBQSxFQUFBQyxhQUFBLElBQUFBLElBQUEsSSxFQUFBQyxHLEVBQUF4QixFLDBNQzJMYXlCLEVBQWMsWUNsS3BCLFNBQUFDLEVBQXVCQyxHQUM1QixPQUFlLE9BQVJBLEdBQStCLGlCQUFSQSxHQUFvQkEsRUFBSUMsT0FBT0MsT0FBUyxFQUdqRSxTQUFBQyxFQUF1QkMsR0FDNUIsT0FBZSxPQUFSQSxHQUErQixpQkFBUkEsRUFHekIsU0FBQUMsRUFBb0JDLEdBQ3pCLE9BQU9ILEVBQWNHLElBQWEsYUFBY0EsRUFHM0MsU0FBQUMsRUFDTEQsR0FFQSxPQUFPRCxFQUFXQyxJQUFhUCxFQUFjTyxFQUFTWCxZQVNqRCxTQUFBYSxFQUFrQkMsR0FDdkIsT0FBT04sRUFBY00sSUFBVyxXQUFZQSxFQUd2QyxTQUFBQyxFQUFxQkMsR0FDMUIsT0FBT1IsRUFBY1EsSUFBYyxjQUFlQSxFQUc3QyxTQUFB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