(()=>{"use strict";var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i={};((t,n)=>{for(var r in n)e(t,r,{get:n[r],enumerable:!0})})(i,{serialize:()=>j});var a,s=(a=i,((i,a,s,u)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let l of n(a))r.call(i,l)||l===s||e(i,l,{get:()=>a[l],enumerable:!(u=t(a,l))||u.enumerable});return i})(e({},"__esModule",{value:!0}),a));function u(e){return null!==e&&"string"==typeof e&&e.trim().length>0}function l(e){return null!==e&&"object"==typeof e}function o(e){return l(e)&&"producer"in e}function f(e,t=new WeakMap){if(t.has(e))return t.get(e);if(null==e)return e;let n;if(Array.isArray(e))n=e.map(e=>f(e,t));else if("object"==typeof e){n={};for(let r in e)n[r]=f(e[r],t)}else if(e instanceof Date)n=new Date(e.getTime());else if(e instanceof Set)n=new Set(e);else{if(!(e instanceof Map))return e instanceof RegExp?new RegExp(e.source,e.flags):(n=e,n);{let r=Array.from(e,([e,n])=>[e,f(n,t)]);n=new Map(r)}}return t.set(e,n),n}function c(e){let t={producer:e.producer.name};return function(e){return o(e)&&u(e.transition)}(e)&&(t.transition=e.transition),t}function p(e){return Array.isArray(e)&&0!==e.length?e.map(e=>{return l(t=e)&&"action"in t?function(e){let t={action:e.action.name};return e.success&&(u(e.success)?t.success=e.success:o(e.success)&&(t.success=c(e.success))),e.failure&&(u(e.failure)?t.failure=e.failure:o(e.failure)&&(t.failure=c(e.failure))),t}(e):o(e)?c(e):void 0;var t}):null}function m(e){return e&&0!==e.length?e.map(e=>function(e){let t={guard:e.guard.name};return u(e.failure)?t.failure=e.failure:o(e.failure)&&(t.failure=c(e.failure)),"machine"in e&&(t.machine=j(e.machine)),t}(e)):null}function d(e){let t={target:e.target},n=m(e.guards);return n&&(t.guards=n),t}function g(e){let t={immediate:e.immediate},n=m(e.guards);return n&&(t.guards=n),t}function y(e){if(!e||0===Object.keys(e).length)return null;let t={};for(let n in e)t[n]=d(e[n]);return t}function h(e){return f(e)}function b(e){return e&&0!==e.length?e.map(({machine:e,transition:t})=>{let n={machine:j(e)};return t&&(n.transition=t),n}):null}function j(e){let t={states:{},parallel:{},context:h(e.context),initial:e.initial};e.title&&(t.title=e.title);for(let n in e.states){t.states[n]={};let r=b(e.states[n].nested);r&&(t.states[n].nested=r);let i=p(e.states[n].run);i&&(t.states[n].run=i);let a=y(e.states[n].on);a&&(t.states[n].on=a);let s=e.states[n].immediate;if(s.length){let e=[];for(let t of s)e.push(g(t));t.states[n].immediate=e}u(e.states[n].type)&&(t.states[n].type=e.states[n].type),u(e.states[n].description)&&(t.states[n].description=e.states[n].description)}for(let n in e.parallel)t.parallel[n]=j(e.parallel[n]);return t}"undefined"!=typeof module?module.exports=s:self.XRobotSerialize=s})();//# sourceMappingURL=index.min.js.map